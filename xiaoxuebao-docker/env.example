# 小雪宝Docker化部署环境变量配置
# 复制此文件为 .env 并修改相应配置

# ===================
# 应用基础配置
# ===================
APP_NAME=小雪宝
APP_VERSION=1.0.0
DEBUG=false
ENVIRONMENT=production

# ===================
# 数据库配置
# ===================
POSTGRES_DB=xiaoxuebao
POSTGRES_USER=xiaoxuebao
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# ===================
# Redis配置
# ===================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_here
REDIS_DB=0

# ===================
# Elasticsearch配置
# ===================
ELASTICSEARCH_HOST=elasticsearch
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_INDEX=xiaoxuebao_wiki

# ===================
# 安全配置
# ===================
SECRET_KEY=your_secret_key_change_in_production
JWT_SECRET=your_jwt_secret_change_in_production
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=10080  # 7天

# ===================
# AI模型配置
# ===================
# 智谱AI配置
ZHIPU_API_KEY=your_zhipu_api_key_here
ZHIPU_MODEL=glm-4

# OpenAI配置 (可选)
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-3.5-turbo

# 嵌入模型配置
EMBEDDING_MODEL=text-embedding-ada-002
EMBEDDING_DIMENSION=1536

# ===================
# 文件存储配置
# ===================
UPLOAD_DIR=/app/uploads
MAX_UPLOAD_SIZE=10485760  # 10MB
ALLOWED_EXTENSIONS=pdf,doc,docx,txt,md

# ===================
# 邮件配置 (可选)
# ===================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your_email@example.com
SMTP_PASSWORD=your_email_password
SMTP_TLS=true

# ===================
# 日志配置
# ===================
LOG_LEVEL=INFO
LOG_FILE=/app/logs/xiaoxuebao.log
LOG_MAX_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=5

# ===================
# 监控配置
# ===================
ENABLE_METRICS=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30

# ===================
# 缓存配置
# ===================
CACHE_TTL=3600  # 1小时
CACHE_MAX_SIZE=1000

# ===================
# 搜索配置
# ===================
SEARCH_PAGE_SIZE=20
SEARCH_MAX_RESULTS=100
SEARCH_HIGHLIGHT=true

# ===================
# 知识库配置
# ===================
KNOWLEDGE_BASE_PATH=/app/knowledge_base
KNOWLEDGE_CHUNK_SIZE=1000
KNOWLEDGE_CHUNK_OVERLAP=200

# ===================
# 儿童关爱模块配置
# ===================
PEDIATRIC_MODE=true
CHILD_FRIENDLY_UI=true
PARENT_GUIDANCE=true

# ===================
# 医生工具配置
# ===================
DOCTOR_MODE=true
MEDICAL_GUIDELINES_PATH=/app/guidelines
LITERATURE_SEARCH=true

# ===================
# 隐私保护配置
# ===================
PRIVACY_MODE=strict
ANONYMOUS_ONLY=true
NO_PII_COLLECTION=true
DATA_RETENTION_DAYS=0

# ===================
# 性能配置
# ===================
WORKER_PROCESSES=4
WORKER_CONNECTIONS=1024
KEEPALIVE_TIMEOUT=65
CLIENT_MAX_BODY_SIZE=10m

# ===================
# SSL配置 (生产环境)
# ===================
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem
SSL_ENABLED=false

# ===================
# 备份配置
# ===================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # 每天凌晨2点
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/app/backups
