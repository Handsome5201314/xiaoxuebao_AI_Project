"use strict";$(function(){var i=function(i){var e,a,o=i+"=",n=document.cookie.split(";");for(e=0;e<n.length;e++){for(a=n[e];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(o))return a.substring(o.length,a.length).replace(/\"/g,"")}return null};$("body").delegate(".review-footer-action-setting a[data-rid]","click",function(e){e.preventDefault();var a=$(this).data();if(window._USER_ABNORMAL)return void(window.show_abnormal&&window.show_abnormal());var o={review_id:a.rid,setting:{rating:a.rating,is_original:a.original,is_spoiler:a.spoiler,is_accept_reward:a.donate,is_open_reward:a.openDonate,explanation_types:a.explanationTypes},subjectTitle:a.subjectTitle,displayRating:a.displayRating,displaySpoiler:a.displaySpoiler,onSubmit:function(e){var n={ck:i("ck")};n["review[original]"]=e.is_original?"on":"",n["review[donate]"]=e.is_accept_reward?"on":"",o.displayRating&&(n["review[rating]"]=e.rating),o.displaySpoiler&&(n["review[spoiler]"]=e.is_spoiler?"on":""),$.post(a.url,n,function(i){self.location.reload()})}};globalReviewSetting.open(o)})}),function(){!function(){var i=['<div class="popup-container hide">','<div class="popup-wrap">','<div class="popup-small">','<a class="close"></a>','<p class="popup-info">你的帐号存在安全风险<br/>写评论前请先输入验证码以证明是本人使用</p>','<div class="popup-btns">',' <a class="btn" href="javascript:;">前往验证</a>',"</div>","</div>","</div>","</div>"].join("");$("body").delegate("a.create-review, .top-tab .btn","click",function(e){e.preventDefault();var a=$(this),o=a;if(a.hasClass("cls_abnormal")&&window._USER_ABNORMAL)return void(show_abnormal&&show_abnormal());a.attr("href")||(o=a.find("a"));var n=$("div.popup-container"),t=o.attr("data-isverify"),r=o.attr("data-verify-url");t&&"false"!=t.toLowerCase()?location.href=o.attr("href"):(n.size()<1&&($("body").append(i),n=$("div.popup-container")),n.find(".btn").attr("href",r),n.removeClass("hide"))}).on("click","div.popup-container .close",function(){$("div.popup-container").addClass("hide")})}(),$("body").delegate(".review-footer-action-remove a","click",function(i){if(i.preventDefault(),window._USER_ABNORMAL)return void(window.show_abnormal&&window.show_abnormal());if(confirm("真的就删了吗?")){var e=$(this).data(),a=$('<form action="'+e.url+'" method="POST"><input type="hidden" name="ck" value="'+get_cookie("ck")+'"/></form>').appendTo("body");a[0].submit()}})}();