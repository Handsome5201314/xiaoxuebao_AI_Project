<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="theme-color" content="#6366f1">
    <meta name="description" content="å°é›ªå®AIåŠ©æ‰‹ - ä¸“ä¸šçš„ç™½è¡€ç—…AIå…³çˆ±å¹³å°ï¼Œä¸ºç™½è¡€ç—…æ‚£å„¿åŠå®¶å±æä¾›24å°æ—¶AIæ™ºèƒ½é—®ç­”ã€æƒ…ç»ªè¯†åˆ«åˆ†æå’Œå¿ƒç†æ”¯æŒæœåŠ¡">
    <meta name="keywords" content="ç™½è¡€ç—…,AIåŠ©æ‰‹,å¿ƒç†å¥åº·,å„¿ç«¥ç™½è¡€ç—…,åŒ»ç–—æ”¯æŒ,å¿ƒç†è¾…å¯¼">
    <meta name="author" content="å°é›ªå®AIåŠ©æ‰‹å›¢é˜Ÿ">
    <!-- Open Graph -->
    <meta property="og:title" content="å°é›ªå®AIåŠ©æ‰‹ - ç™½è¡€ç—…AIå…³çˆ±å¹³å°">
    <meta property="og:description" content="ä¸“ä¸šçš„ç™½è¡€ç—…AIå…³çˆ±å¹³å°ï¼Œä¸ºç™½è¡€ç—…æ‚£å„¿åŠå®¶å±æä¾›24å°æ—¶AIæ™ºèƒ½é—®ç­”æœåŠ¡">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/static/images/og-image.jpg">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="å°é›ªå®AIåŠ©æ‰‹">
    <meta name="twitter:description" content="ç™½è¡€ç—…AIå…³çˆ±å¹³å°">
    <title>å°é›ªå®AIåŠ©æ‰‹ - ç™½è¡€ç—…AIå…³çˆ±å¹³å°</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- é…ç½®Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f4ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81'
                        },
                        secondary: {
                            50: '#faf5ff',
                            100: '#f3e8ff',
                            200: '#e9d5ff',
                            300: '#d8b4fe',
                            400: '#c084fc',
                            500: '#a855f7',
                            600: '#9333ea',
                            700: '#7c3aed',
                            800: '#6b21a8',
                            900: '#581c87'
                        },
                        accent: {
                            50: '#fdf2f8',
                            100: '#fce7f3',
                            200: '#fbcfe8',
                            300: '#f9a8d4',
                            400: '#f472b6',
                            500: '#ec4899',
                            600: '#db2777',
                            700: '#be185d',
                            800: '#9d174d',
                            900: '#831843'
                        },
                        success: {
                            50: '#f0fdf4',
                            100: '#dcfce7',
                            200: '#bbf7d0',
                            300: '#86efac',
                            400: '#4ade80',
                            500: '#22c55e',
                            600: '#16a34a',
                            700: '#15803d',
                            800: '#166534',
                            900: '#14532d'
                        },
                        warning: {
                            50: '#fffbeb',
                            100: '#fef3c7',
                            200: '#fde68a',
                            300: '#fcd34d',
                            400: '#fbbf24',
                            500: '#f59e0b',
                            600: '#d97706',
                            700: '#b45309',
                            800: '#92400e',
                            900: '#78350f'
                        },
                        error: {
                            50: '#fef2f2',
                            100: '#fee2e2',
                            200: '#fecaca',
                            300: '#fca5a5',
                            400: '#f87171',
                            500: '#ef4444',
                            600: '#dc2626',
                            700: '#b91c1c',
                            800: '#991b1b',
                            900: '#7f1d1d'
                        },
                        info: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a'
                        },
                        light: '#f8fafc',
                        dark: '#1e293b'
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.6s ease-out forwards',
                        'slide-up': 'slideUp 0.5s ease-out forwards',
                        'bounce-gentle': 'bounceGentle 2s infinite',
                        'pulse-soft': 'pulseSoft 2s infinite',
                        'float': 'float 3s ease-in-out infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate'
                    }
                },
            }
        }
    </script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        
        /* åŠ¨ç”»å®šä¹‰ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes bounceGentle {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        @keyframes pulseSoft {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
            to { box-shadow: 0 0 30px rgba(168, 85, 247, 0.5); }
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* æ¸å˜èƒŒæ™¯ */
        .bg-gradient-primary {
            background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
        }
        
        .bg-gradient-light {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }
        
        .bg-gradient-hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #ec4899 100%);
            background-size: 200% 200%;
            animation: gradientShift 6s ease infinite;
        }
        
        .bg-gradient-feature {
            background: linear-gradient(135deg, #f0f4ff 0%, #faf5ff 100%);
        }
        
        /* èŠå¤©ç•Œé¢æ ·å¼ */
        .chat-container {
            height: 500px;
            background: linear-gradient(to bottom, #f8fafc, #ffffff);
        }
        
        .message-user {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .message-ai {
            background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
            color: #334155;
        }
        
        /* è¾“å…¥æ¡†æ ·å¼ */
        .input-focus:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        /* å¡ç‰‡æ‚¬åœæ•ˆæœ */
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        /* æ‰“å­—æœºæ•ˆæœ */
        .typing-indicator {
            display: inline-block;
        }
        
        .typing-indicator::after {
            content: '|';
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        /* æ»šåŠ¨æ¡æ ·å¼ */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        /* å“åº”å¼è®¾è®¡ä¼˜åŒ– */
        @media (max-width: 768px) {
            .hero-section {
                padding: 2rem 1rem;
            }
            
            .hero-title {
                font-size: 2.5rem;
                line-height: 1.2;
            }
            
            .hero-subtitle {
                font-size: 1.125rem;
            }
            
            .feature-card {
                margin-bottom: 1rem;
                padding: 1.5rem;
            }
            
            .chat-container {
                max-height: 50vh;
                padding: 1rem;
            }
            
            .quick-questions {
                gap: 0.5rem;
            }
            
            .quick-question-btn {
                font-size: 0.75rem;
                padding: 0.5rem 1rem;
            }
            
            .nav-menu {
                display: none;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
            
            .footer-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
        }
        
        @media (max-width: 480px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .feature-card {
                padding: 1rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .quick-questions {
                flex-direction: column;
                align-items: stretch;
            }
            
            .quick-question-btn {
                text-align: center;
                justify-content: center;
            }
        }
        
        /* è§¦æ‘¸è®¾å¤‡ä¼˜åŒ– */
        @media (hover: none) and (pointer: coarse) {
            .card-hover {
                transform: none;
            }
            
            .btn-hover {
                transform: none;
            }
            
            .quick-question-btn:active {
                transform: scale(0.98);
            }
        }
        
        /* é«˜å¯¹æ¯”åº¦æ¨¡å¼æ”¯æŒ */
        @media (prefers-contrast: high) {
            .text-gray-600 {
                color: #000;
            }
            
            .text-gray-400 {
                color: #666;
            }
            
            .border-gray-200 {
                border-color: #000;
            }
        }
        
        /* å‡å°‘åŠ¨ç”»æ¨¡å¼ */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* å¯è®¿é—®æ€§ä¼˜åŒ– */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* ç„¦ç‚¹å¯è§æ€§ */
        .focus-visible:focus {
            outline: 2px solid #6366f1;
            outline-offset: 2px;
        }
        
        /* é«˜å¯¹æ¯”åº¦æ¨¡å¼ */
        @media (prefers-contrast: high) {
            :root {
                --text-primary: #000000;
                --text-secondary: #333333;
                --border-color: #000000;
            }
        }
        
        /* æ€§èƒ½ä¼˜åŒ– */
        .will-change-transform {
            will-change: transform;
        }
        
        .will-change-opacity {
            will-change: opacity;
        }
        
        /* æ‰“å°æ ·å¼ */
        @media print {
            .no-print {
                display: none !important;
            }
            
            body {
                background: white !important;
                color: black !important;
            }
            
            .bg-gradient-primary,
            .bg-gradient-hero {
                background: white !important;
                color: black !important;
            }
        }
    </style>
</head>
<body class="bg-light critical-css">
    <!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
    <div id="loading-spinner" class="loading-spinner">
        <div class="flex flex-col items-center space-y-4">
            <div class="w-16 h-16 bg-gradient-primary rounded-full flex items-center justify-center animate-spin">
                <i class="fas fa-heartbeat text-white text-2xl"></i>
            </div>
            <p class="text-gray-600 font-medium">å°é›ªå®AIåŠ©æ‰‹åŠ è½½ä¸­...</p>
        </div>
    </div>
    <!-- å¯¼èˆªæ  -->
    <nav class="bg-white/95 backdrop-blur-md shadow-sm sticky top-0 z-50 border-b border-gray-100" aria-label="ä¸»å¯¼èˆª">
        <span class="sr-only">å°é›ªå®AIåŠ©æ‰‹ç½‘ç«™å¯¼èˆª</span>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-primary rounded-lg flex items-center justify-center shadow-lg animate-float">
                        <i class="fas fa-heartbeat text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-800">å°é›ªå®AIåŠ©æ‰‹</h1>
                        <p class="text-xs text-primary-600 font-medium">ç™½è¡€ç—…AIå…³çˆ±å¹³å°</p>
                    </div>
                </div>
                <div class="hidden md:flex items-center space-x-6">
                    <a href="#chat" class="text-gray-600 hover:text-primary-600 transition-all duration-300 font-medium relative group focus-visible" aria-label="è·³è½¬åˆ°AIé—®ç­”åŒºåŸŸ">
                        AIé—®ç­”
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-primary-600 transition-all duration-300 group-hover:w-full" aria-hidden="true"></span>
                    </a>
                    <a href="#features" class="text-gray-600 hover:text-primary-600 transition-all duration-300 font-medium relative group focus-visible" aria-label="è·³è½¬åˆ°åŠŸèƒ½ç‰¹è‰²åŒºåŸŸ">
                        åŠŸèƒ½ç‰¹è‰²
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-primary-600 transition-all duration-300 group-hover:w-full" aria-hidden="true"></span>
                    </a>
                    <a href="#about" class="text-gray-600 hover:text-primary-600 transition-all duration-300 font-medium relative group focus-visible" aria-label="è·³è½¬åˆ°å…³äºæˆ‘ä»¬åŒºåŸŸ">
                        å…³äºæˆ‘ä»¬
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-primary-600 transition-all duration-300 group-hover:w-full" aria-hidden="true"></span>
                    </a>
                    <button class="bg-gradient-primary text-white px-6 py-2 rounded-lg hover:shadow-lg transition-all duration-300 font-medium shadow-md hover:scale-105 focus-visible" aria-label="è”ç³»ä¸“å®¶å›¢é˜Ÿ">
                        <i class="fas fa-comments mr-2" aria-hidden="true"></i>
                        è”ç³»ä¸“å®¶
                    </button>
                </div>
                <button class="md:hidden text-gray-600 p-2 rounded-lg hover:bg-gray-100 transition-colors mobile-menu-btn" onclick="toggleMobileMenu()">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                
                <!-- ç§»åŠ¨ç«¯èœå• -->
                <div id="mobile-menu" class="md:hidden fixed top-16 left-0 right-0 bg-white shadow-lg border-t border-gray-100 z-40 hidden">
                    <div class="px-4 py-2 space-y-1">
                        <a href="#chat" class="block py-3 px-4 text-gray-700 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors" onclick="toggleMobileMenu()">
                            <i class="fas fa-robot mr-3"></i>AIé—®ç­”
                        </a>
                        <a href="#features" class="block py-3 px-4 text-gray-700 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors" onclick="toggleMobileMenu()">
                            <i class="fas fa-star mr-3"></i>åŠŸèƒ½ç‰¹è‰²
                        </a>
                        <a href="#about" class="block py-3 px-4 text-gray-700 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors" onclick="toggleMobileMenu()">
                            <i class="fas fa-info-circle mr-3"></i>å…³äºæˆ‘ä»¬
                        </a>
                        <button class="w-full text-left py-3 px-4 bg-gradient-primary text-white rounded-lg hover:shadow-lg transition-all">
                            <i class="fas fa-comments mr-3"></i>è”ç³»ä¸“å®¶
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="min-h-screen">
        <!-- HeroåŒºåŸŸ -->
        <section class="bg-gradient-hero text-white py-20 relative overflow-hidden">
            <!-- è£…é¥°å…ƒç´  -->
            <div class="absolute top-10 left-10 w-20 h-20 bg-white/10 rounded-full animate-float"></div>
            <div class="absolute bottom-20 right-20 w-16 h-16 bg-white/10 rounded-full animate-float" style="animation-delay: 1s;"></div>
            <div class="absolute top-1/3 right-1/4 w-12 h-12 bg-white/10 rounded-full animate-float" style="animation-delay: 2s;"></div>
            
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                <div class="text-center animate-fade-in">
                    <div class="inline-flex items-center bg-white/10 backdrop-blur-sm rounded-full px-6 py-2 mb-6 border border-white/20">
                        <i class="fas fa-heart mr-2 text-accent-400"></i>
                        <span class="text-sm font-medium">ç™½è¡€ç—…AIå…³çˆ±å¹³å°</span>
                    </div>
                    <h1 class="text-4xl md:text-6xl lg:text-7xl font-bold mb-6 leading-tight">
                        å°é›ªå®<span class="text-accent-300">AI</span>åŠ©æ‰‹
                    </h1>
                    <p class="text-xl md:text-2xl mb-8 opacity-95 max-w-4xl mx-auto leading-relaxed">
                        ç”¨<span class="text-accent-300 font-semibold">ç§‘æŠ€æ¸©æš–ç”Ÿå‘½</span>ï¼Œä¸ºç™½è¡€ç—…æ‚£å„¿åŠå®¶å±æä¾›ä¸“ä¸šçš„<span class="text-accent-300 font-semibold">AIå¿ƒç†æ”¯æŒ</span>ä¸<span class="text-accent-300 font-semibold">åŒ»ç–—æŒ‡å¯¼</span>
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                        <button onclick="scrollToChat()" class="bg-white text-primary-600 px-8 py-4 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 group focus-visible" aria-label="å¼€å§‹ä¸AIåŠ©æ‰‹å¯¹è¯">
                            <i class="fas fa-comments mr-2 group-hover:scale-110 transition-transform" aria-hidden="true"></i>
                            å¼€å§‹AIå¯¹è¯
                        </button>
                        <button class="border-2 border-white text-white px-8 py-4 rounded-xl font-semibold hover:bg-white hover:text-primary-600 transition-all duration-300 hover:scale-105 group focus-visible" aria-label="äº†è§£æ›´å¤šå…³äºå°é›ªå®AIåŠ©æ‰‹çš„ä¿¡æ¯">
                            <i class="fas fa-play mr-2 group-hover:scale-110 transition-transform" aria-hidden="true"></i>
                            äº†è§£æ›´å¤š
                        </button>
                    </div>
                    
                    <!-- ç»Ÿè®¡æ•°æ® -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mt-16 max-w-2xl mx-auto">
                        <div class="text-center">
                            <div class="text-3xl font-bold mb-2">100+</div>
                            <div class="text-sm opacity-90">åŒ»ç–—ä¸“å®¶å‚ä¸</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold mb-2">500+</div>
                            <div class="text-sm opacity-90">å®¶åº­è·å¾—å¸®åŠ©</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold mb-2">24/7</div>
                            <div class="text-sm opacity-90">AIåœ¨çº¿æœåŠ¡</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold mb-2">99%</div>
                            <div class="text-sm opacity-90">ç”¨æˆ·æ»¡æ„åº¦</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- AIé—®ç­”ç³»ç»Ÿ - æ ¸å¿ƒåŠŸèƒ½åŒº -->
        <section id="chat" class="py-20 bg-gradient-to-br from-gray-50 to-white">
            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16 animate-slide-up">
                    <div class="inline-flex items-center bg-primary-50 text-primary-600 px-4 py-2 rounded-full mb-4">
                        <i class="fas fa-robot mr-2"></i>
                        <span class="text-sm font-medium">AIæ™ºèƒ½é—®ç­”ç³»ç»Ÿ</span>
                    </div>
                    <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-800 mb-4">
                        æ™ºèƒ½<span class="text-primary-600">å¯¹è¯</span>åŠ©æ‰‹
                    </h2>
                    <p class="text-lg text-gray-600 max-w-2xl mx-auto leading-relaxed">
                        åŸºäºå…ˆè¿›AIæŠ€æœ¯ï¼Œä¸ºç™½è¡€ç—…æ‚£å„¿åŠå®¶å±æä¾›<span class="text-primary-600 font-medium">24å°æ—¶ä¸“ä¸šé—®ç­”æœåŠ¡</span>ï¼Œæ¶µç›–ç–¾ç—…çŸ¥è¯†ã€å¿ƒç†æ”¯æŒã€æ²»ç–—æŒ‡å¯¼ç­‰å…¨æ–¹ä½æ”¯æŒ
                    </p>
                </div>

                <!-- èŠå¤©ç•Œé¢ -->
                <div class="bg-white rounded-3xl shadow-2xl overflow-hidden card-hover transition-all duration-500 hover:shadow-3xl border border-gray-100">
                    <!-- èŠå¤©å¤´éƒ¨ -->
                    <div class="bg-gradient-primary text-white p-6 relative overflow-hidden">
                        <!-- è£…é¥°èƒŒæ™¯ -->
                        <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16"></div>
                        <div class="absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-12 -translate-x-12"></div>
                        
                        <div class="flex items-center justify-between relative z-10">
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center shadow-lg">
                                    <i class="fas fa-robot text-white text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-lg">å°é›ªå®AIåŠ©æ‰‹</h3>
                                    <p class="text-sm opacity-90 flex items-center">
                                        <span class="inline-block w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse-soft"></span>
                                        åœ¨çº¿æœåŠ¡ä¸­ â€¢ ç™½è¡€ç—…ä¸“ä¸šæ”¯æŒ
                                    </p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <button onclick="clearChat()" class="text-white hover:bg-white hover:bg-opacity-20 p-3 rounded-xl transition-all duration-300 hover:scale-110" title="æ¸…ç©ºå¯¹è¯">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                                <button class="text-white hover:bg-white hover:bg-opacity-20 p-3 rounded-xl transition-all duration-300 hover:scale-110" title="è®¾ç½®">
                                    <i class="fas fa-cog"></i>
                                </button>
                                <button class="text-white hover:bg-white hover:bg-opacity-20 p-3 rounded-xl transition-all duration-300 hover:scale-110" title="çŸ¥è¯†åº“">
                                    <i class="fas fa-book"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- èŠå¤©æ¶ˆæ¯åŒºåŸŸ -->
                    <div id="chat-messages" class="chat-container overflow-y-auto custom-scrollbar p-6 space-y-6 min-h-[400px]">
                        <!-- æ¬¢è¿æ¶ˆæ¯ -->
                        <div class="flex items-start space-x-4 animate-fade-in">
                            <div class="w-10 h-10 bg-gradient-primary rounded-full flex items-center justify-center flex-shrink-0 shadow-lg">
                                <i class="fas fa-robot text-white"></i>
                            </div>
                            <div class="message-ai rounded-2xl rounded-tl-sm p-6 max-w-2xl border border-gray-100 shadow-sm">
                                <div class="flex items-center mb-3">
                                    <div class="w-3 h-3 bg-primary-500 rounded-full mr-2 animate-pulse"></div>
                                    <span class="text-sm font-medium text-primary-600">å°é›ªå®AIåŠ©æ‰‹</span>
                                </div>
                                <p class="text-gray-700 leading-relaxed">
                                    æ‚¨å¥½ï¼æˆ‘æ˜¯å°é›ªå®AIåŠ©æ‰‹ ğŸ¤–<br><br>
                                    æˆ‘å¯ä»¥ä¸ºæ‚¨æä¾›ä¸“ä¸šçš„ç™½è¡€ç—…ç›¸å…³æ”¯æŒï¼š<br>
                                    <span class="inline-flex items-center bg-primary-50 text-primary-700 px-3 py-1 rounded-full text-sm mr-2 mb-2">
                                        <i class="fas fa-book-medical mr-1"></i>ç–¾ç—…çŸ¥è¯†è§£ç­”
                                    </span>
                                    <span class="inline-flex items-center bg-accent-50 text-accent-700 px-3 py-1 rounded-full text-sm mr-2 mb-2">
                                        <i class="fas fa-heart mr-1"></i>å¿ƒç†æ”¯æŒ
                                    </span>
                                    <span class="inline-flex items-center bg-success-50 text-success-700 px-3 py-1 rounded-full text-sm mr-2 mb-2">
                                        <i class="fas fa-user-md mr-1"></i>æ²»ç–—æŒ‡å¯¼
                                    </span>
                                    <span class="inline-flex items-center bg-info-50 text-info-700 px-3 py-1 rounded-full text-sm mr-2 mb-2">
                                        <i class="fas fa-home mr-1"></i>ç”Ÿæ´»æŠ¤ç†
                                    </span>
                                    <br><br>
                                    æœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥éšæ—¶é—®æˆ‘å“¦ï¼
                                </p>
                                <div class="mt-4 pt-4 border-t border-gray-100">
                                    <p class="text-xs text-gray-500">
                                        <i class="fas fa-shield-alt mr-1"></i>
                                        æ‚¨çš„å¯¹è¯å†…å®¹å°†ä¸¥æ ¼ä¿å¯†ï¼Œæˆ‘ä»¬é‡‡ç”¨ä¼ä¸šçº§åŠ å¯†æŠ€æœ¯ä¿æŠ¤æ‚¨çš„éšç§å®‰å…¨
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- è¾“å…¥åŒºåŸŸ -->
                    <div class="border-t bg-gradient-to-r from-gray-50 to-gray-100 p-6">
                        <div class="flex items-end space-x-4">
                            <div class="flex-1 relative">
                                <textarea 
                                    id="message-input" 
                                    placeholder="è¯·è¾“å…¥æ‚¨å…³äºç™½è¡€ç—…çš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼šåŒ–ç–—æœŸé—´éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ..." 
                                    class="w-full p-4 border border-gray-200 rounded-2xl resize-none input-focus transition-all duration-300 shadow-sm focus:shadow-md focus:border-primary-300"
                                    rows="1"
                                    onkeydown="handleKeyDown(event)"
                                    oninput="autoResize(this)"
                                ></textarea>
                                <div class="absolute right-3 top-3 text-gray-400">
                                    <i class="fas fa-keyboard"></i>
                                </div>
                            </div>
                            <button 
                                id="send-button"
                                onclick="sendMessage()" 
                                class="bg-gradient-primary text-white p-4 rounded-2xl hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 shadow-md"
                                title="å‘é€æ¶ˆæ¯ (Ctrl+Enter)"
                            >
                                <i class="fas fa-paper-plane text-lg"></i>
                            </button>
                        </div>
                        
                        <!-- å¿«æ·é—®é¢˜å’ŒçŸ¥è¯†åº“æœç´¢ -->
                        <div class="mt-4">
                            <div class="flex items-center justify-between mb-3">
                                <p class="text-sm font-medium text-gray-700">å¿«æ·é—®é¢˜ï¼š</p>
                                <button onclick="toggleKnowledgeSearch()" class="text-sm text-primary-600 hover:text-primary-700 transition-colors font-medium">
                                    <i class="fas fa-search mr-1"></i>çŸ¥è¯†åº“æœç´¢
                                </button>
                            </div>

                            <!-- å¿«æ·é—®é¢˜æŒ‰é’® -->
                            <div id="quick-questions" class="flex flex-wrap gap-3">
                                <button onclick="sendQuickQuestion('æˆ‘çš„å­©å­ç¡®è¯Šç™½è¡€ç—…åå¾ˆç„¦è™‘ï¼Œæ€ä¹ˆåŠï¼Ÿ')" class="text-sm bg-white hover:bg-primary-50 border border-gray-200 hover:border-primary-300 text-gray-700 hover:text-primary-700 px-4 py-2 rounded-xl transition-all duration-300 hover:scale-105 shadow-sm hover:shadow-md group">
                                    <i class="fas fa-heartbeat mr-2 text-accent-500 group-hover:scale-110 transition-transform"></i>
                                    å­©å­ç„¦è™‘æ€ä¹ˆåŠï¼Ÿ
                                </button>
                                <button onclick="sendQuickQuestion('åŒ–ç–—æœŸé—´éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ')" class="text-sm bg-white hover:bg-primary-50 border border-gray-200 hover:border-primary-300 text-gray-700 hover:text-primary-700 px-4 py-2 rounded-xl transition-all duration-300 hover:scale-105 shadow-sm hover:shadow-md group">
                                    <i class="fas fa-pills mr-2 text-info-500 group-hover:scale-110 transition-transform"></i>
                                    åŒ–ç–—æ³¨æ„äº‹é¡¹
                                </button>
                                <button onclick="sendQuickQuestion('å¦‚ä½•å¸®åŠ©å­©å­å»ºç«‹æ²»ç–—ä¿¡å¿ƒï¼Ÿ')" class="text-sm bg-white hover:bg-primary-50 border border-gray-200 hover:border-primary-300 text-gray-700 hover:text-primary-700 px-4 py-2 rounded-xl transition-all duration-300 hover:scale-105 shadow-sm hover:shadow-md group">
                                    <i class="fas fa-hands-helping mr-2 text-success-500 group-hover:scale-110 transition-transform"></i>
                                    å»ºç«‹æ²»ç–—ä¿¡å¿ƒ
                                </button>
                                <button onclick="sendQuickQuestion('ç™½è¡€ç—…æ‚£å„¿çš„è¥å…»æŒ‡å¯¼')" class="text-sm bg-white hover:bg-primary-50 border border-gray-200 hover:border-primary-300 text-gray-700 hover:text-primary-700 px-4 py-2 rounded-xl transition-all duration-300 hover:scale-105 shadow-sm hover:shadow-md group">
                                    <i class="fas fa-utensils mr-2 text-warning-500 group-hover:scale-110 transition-transform"></i>
                                    è¥å…»æŒ‡å¯¼
                                </button>
                                <button onclick="sendQuickQuestion('ç™½è¡€ç—…çš„ç—‡çŠ¶è¡¨ç°')" class="text-sm bg-white hover:bg-primary-50 border border-gray-200 hover:border-primary-300 text-gray-700 hover:text-primary-700 px-4 py-2 rounded-xl transition-all duration-300 hover:scale-105 shadow-sm hover:shadow-md group">
                                    <i class="fas fa-stethoscope mr-2 text-error-500 group-hover:scale-110 transition-transform"></i>
                                    ç—‡çŠ¶è¡¨ç°
                                </button>
                                <button onclick="sendQuickQuestion('å®¶é•¿æƒ…ç»ªç®¡ç†')" class="text-sm bg-white hover:bg-primary-50 border border-gray-200 hover:border-primary-300 text-gray-700 hover:text-primary-700 px-4 py-2 rounded-xl transition-all duration-300 hover:scale-105 shadow-sm hover:shadow-md group">
                                    <i class="fas fa-user-friends mr-2 text-secondary-500 group-hover:scale-110 transition-transform"></i>
                                    å®¶é•¿æƒ…ç»ªç®¡ç†
                                </button>
                            </div>

                            <!-- çŸ¥è¯†åº“æœç´¢ç•Œé¢ -->
                            <div id="knowledge-search" class="hidden mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-book text-primary"></i>
                                        <span class="text-sm font-medium text-gray-700">ä¸“ä¸šçŸ¥è¯†åº“æœç´¢</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <button onclick="toggleAdvancedSearch()" class="text-xs text-primary hover:text-secondary transition-colors">
                                            <i class="fas fa-cog mr-1"></i>é«˜çº§é€‰é¡¹
                                        </button>
                                        <button onclick="showSearchStats()" class="text-xs text-gray-500 hover:text-primary transition-colors">
                                            <i class="fas fa-chart-bar mr-1"></i>ç»Ÿè®¡
                                        </button>
                                    </div>
                                </div>

                                <!-- åŸºç¡€æœç´¢ -->
                                <div class="flex space-x-2 mb-3">
                                    <input
                                        type="text"
                                        id="kb-search-input"
                                        placeholder="æœç´¢ç™½è¡€ç—…ç›¸å…³çŸ¥è¯†..."
                                        class="flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:border-primary"
                                        onkeydown="handleKbSearchKeyDown(event)"
                                    >
                                    <button
                                        onclick="searchKnowledge()"
                                        class="px-4 py-2 bg-primary text-white text-sm rounded-lg hover:opacity-90 transition-opacity"
                                        title="å¸¸è§„æœç´¢"
                                    >
                                        <i class="fas fa-search mr-1"></i>æœç´¢
                                    </button>
                                    <button
                                        onclick="smartSearchKnowledge()"
                                        class="px-4 py-2 bg-secondary text-white text-sm rounded-lg hover:opacity-90 transition-opacity"
                                        title="æ™ºèƒ½æœç´¢ - åŒ…å«å»ºè®®å’Œç›¸å…³åˆ†ç±»"
                                    >
                                        <i class="fas fa-magic mr-1"></i>æ™ºèƒ½
                                    </button>
                                </div>

                                <!-- é«˜çº§æœç´¢é€‰é¡¹ -->
                                <div id="advanced-search" class="hidden mb-3 p-3 bg-white rounded-lg border border-gray-200">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-xs">
                                        <div>
                                            <label class="block text-gray-700 font-medium mb-1">
                                                <i class="fas fa-filter mr-1"></i>åˆ†ç±»ç­›é€‰:
                                            </label>
                                            <select id="category-filter" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-primary">
                                                <option value="">ğŸ” å…¨éƒ¨åˆ†ç±»</option>
                                                <option value="ç–¾ç—…çŸ¥è¯†">ğŸ¥ ç–¾ç—…çŸ¥è¯†</option>
                                                <option value="æ²»ç–—æŠ¤ç†">ğŸ’Š æ²»ç–—æŠ¤ç†</option>
                                                <option value="å¿ƒç†å¥åº·">ğŸ§˜ å¿ƒç†å¥åº·</option>
                                                <option value="è¥å…»æŒ‡å¯¼">ğŸ è¥å…»æŒ‡å¯¼</option>
                                                <option value="å®¶é•¿æ”¯æŒ">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶é•¿æ”¯æŒ</option>
                                                <option value="ç”Ÿæ´»æŒ‡å¯¼">ğŸ  ç”Ÿæ´»æŒ‡å¯¼</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-gray-700 font-medium mb-1">
                                                <i class="fas fa-star mr-1"></i>æœ€ä½ç›¸å…³åº¦:
                                            </label>
                                            <select id="min-score-filter" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:border-primary">
                                                <option value="0">â­ ä¸é™åˆ¶</option>
                                                <option value="1">â­â­ 1åˆ†ä»¥ä¸Š</option>
                                                <option value="2">â­â­â­ 2åˆ†ä»¥ä¸Š</option>
                                                <option value="3">â­â­â­â­ 3åˆ†ä»¥ä¸Š</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="mt-3 pt-3 border-t border-gray-200">
                                        <div class="flex items-center justify-between">
                                            <span class="text-xs text-gray-600">å¿«é€Ÿæ“ä½œ:</span>
                                            <div class="flex space-x-2">
                                                <button onclick="clearSearchFilters()" class="text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded">
                                                    <i class="fas fa-times mr-1"></i>æ¸…é™¤ç­›é€‰
                                                </button>
                                                <button onclick="getSearchStats()" class="text-xs bg-blue-100 hover:bg-blue-200 px-2 py-1 rounded">
                                                    <i class="fas fa-info-circle mr-1"></i>æœç´¢ç»Ÿè®¡
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- å¿«é€Ÿåˆ†ç±»æŒ‰é’® -->
                                <div class="mb-3">
                                    <div class="flex items-center justify-between mb-2">
                                        <span class="text-xs text-gray-600 font-medium">å¿«é€Ÿåˆ†ç±»æµè§ˆ:</span>
                                        <button onclick="toggleQuickCategories()" class="text-xs text-primary hover:text-secondary">
                                            <i class="fas fa-chevron-down mr-1" id="category-toggle-icon"></i>å±•å¼€
                                        </button>
                                    </div>
                                    <div id="quick-categories" class="grid grid-cols-2 md:grid-cols-3 gap-2">
                                        <button onclick="searchByCategory('ç–¾ç—…çŸ¥è¯†')" class="text-xs bg-red-100 hover:bg-red-200 px-3 py-2 rounded-lg text-left transition-colors">
                                            <i class="fas fa-hospital mr-1"></i>ç–¾ç—…çŸ¥è¯†
                                        </button>
                                        <button onclick="searchByCategory('æ²»ç–—æŠ¤ç†')" class="text-xs bg-green-100 hover:bg-green-200 px-3 py-2 rounded-lg text-left transition-colors">
                                            <i class="fas fa-pills mr-1"></i>æ²»ç–—æŠ¤ç†
                                        </button>
                                        <button onclick="searchByCategory('å¿ƒç†å¥åº·')" class="text-xs bg-blue-100 hover:bg-blue-200 px-3 py-2 rounded-lg text-left transition-colors">
                                            <i class="fas fa-heart mr-1"></i>å¿ƒç†å¥åº·
                                        </button>
                                        <button onclick="searchByCategory('è¥å…»æŒ‡å¯¼')" class="text-xs bg-yellow-100 hover:bg-yellow-200 px-3 py-2 rounded-lg text-left transition-colors">
                                            <i class="fas fa-apple-alt mr-1"></i>è¥å…»æŒ‡å¯¼
                                        </button>
                                        <button onclick="searchByCategory('å®¶é•¿æ”¯æŒ')" class="text-xs bg-purple-100 hover:bg-purple-200 px-3 py-2 rounded-lg text-left transition-colors">
                                            <i class="fas fa-users mr-1"></i>å®¶é•¿æ”¯æŒ
                                        </button>
                                        <button onclick="searchByCategory('ç”Ÿæ´»æŒ‡å¯¼')" class="text-xs bg-pink-100 hover:bg-pink-200 px-3 py-2 rounded-lg text-left transition-colors">
                                            <i class="fas fa-home mr-1"></i>ç”Ÿæ´»æŒ‡å¯¼
                                        </button>
                                    </div>
                                </div>

                                <!-- æœç´¢ç»“æœåŒºåŸŸ -->
                                <div id="kb-search-results" class="mt-3 hidden"></div>

                                <!-- æœç´¢ç»Ÿè®¡ä¿¡æ¯ -->
                                <div id="search-stats" class="hidden mt-3 p-3 bg-gray-50 rounded-lg border">
                                    <div class="text-xs text-gray-600">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="font-medium">çŸ¥è¯†åº“ç»Ÿè®¡</span>
                                            <button onclick="hideSearchStats()" class="text-gray-400 hover:text-gray-600">
                                                <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                                        <div id="stats-content">åŠ è½½ä¸­...</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- åŠŸèƒ½ç‰¹è‰²åŒºåŸŸ -->
        <section id="features" class="py-20 bg-gradient-feature relative overflow-hidden">
            <!-- è£…é¥°èƒŒæ™¯ -->
            <div class="absolute top-0 left-0 w-full h-32 bg-gradient-to-b from-primary-50 to-transparent"></div>
            <div class="absolute bottom-0 right-0 w-64 h-64 bg-accent-50 rounded-full -translate-x-32 translate-y-32 opacity-50"></div>
            
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                <div class="text-center mb-16">
                    <div class="inline-flex items-center bg-white text-primary-600 px-4 py-2 rounded-full mb-4 shadow-sm border border-primary-100">
                        <i class="fas fa-star mr-2"></i>
                        <span class="text-sm font-medium">æ ¸å¿ƒåŠŸèƒ½ç‰¹è‰²</span>
                    </div>
                    <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-800 mb-4">
                        å…¨æ–¹ä½<span class="text-primary-600">æ™ºèƒ½</span>æ”¯æŒ
                    </h2>
                    <p class="text-lg text-gray-600 max-w-3xl mx-auto leading-relaxed">
                        åŸºäºå…ˆè¿›AIæŠ€æœ¯ï¼Œä¸ºç™½è¡€ç—…æ‚£å„¿åŠå®¶å±æä¾›<span class="text-primary-600 font-medium">ä¸“ä¸šã€æ¸©æš–ã€ä¸ªæ€§åŒ–</span>çš„å…¨æ–¹ä½æ™ºèƒ½åŒ–æ”¯æŒæœåŠ¡
                    </p>
                </div>

                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- åŠŸèƒ½å¡ç‰‡1 -->
                    <div class="bg-white rounded-2xl p-8 shadow-lg card-hover transition-all duration-500 border border-gray-100 hover:border-primary-200 group">
                        <div class="w-16 h-16 bg-gradient-primary rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform duration-300">
                            <i class="fas fa-brain text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-4 group-hover:text-primary-600 transition-colors">AIæ™ºèƒ½é—®ç­”</h3>
                        <p class="text-gray-600 mb-6 leading-relaxed">åŸºäºQwen3-8Bå¤§æ¨¡å‹ï¼Œæä¾›ä¸“ä¸šçš„ç™½è¡€ç—…çŸ¥è¯†è§£ç­”å’ŒåŒ»ç–—æŒ‡å¯¼ï¼Œ24å°æ—¶åœ¨çº¿æœåŠ¡</p>
                        <div class="flex items-center text-primary-600 text-sm font-medium group-hover:translate-x-2 transition-transform">
                            <span>æ¢ç´¢åŠŸèƒ½</span>
                            <i class="fas fa-arrow-right ml-2 group-hover:scale-110 transition-transform"></i>
                        </div>
                    </div>

                    <!-- åŠŸèƒ½å¡ç‰‡2 -->
                    <div class="bg-white rounded-2xl p-8 shadow-lg card-hover transition-all duration-500 border border-gray-100 hover:border-accent-200 group">
                        <div class="w-16 h-16 bg-gradient-to-br from-accent-500 to-pink-500 rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform duration-300">
                            <i class="fas fa-heart text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-4 group-hover:text-accent-600 transition-colors">æƒ…ç»ªè¯†åˆ«åˆ†æ</h3>
                        <p class="text-gray-600 mb-6 leading-relaxed">å¤šæ¨¡æ€æƒ…ç»ªè¯†åˆ«æŠ€æœ¯ï¼Œå®æ—¶åˆ†æå„¿ç«¥å¿ƒç†çŠ¶æ€å¹¶æä¾›ä¸ªæ€§åŒ–å¹²é¢„å»ºè®®</p>
                        <div class="flex items-center text-accent-600 text-sm font-medium group-hover:translate-x-2 transition-transform">
                            <span>äº†è§£è¯¦æƒ…</span>
                            <i class="fas fa-arrow-right ml-2 group-hover:scale-110 transition-transform"></i>
                        </div>
                    </div>

                    <!-- åŠŸèƒ½å¡ç‰‡3 -->
                    <div class="bg-white rounded-2xl p-8 shadow-lg card-hover transition-all duration-500 border border-gray-100 hover:border-success-200 group">
                        <div class="w-16 h-16 bg-gradient-to-br from-success-500 to-green-500 rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform duration-300">
                            <i class="fas fa-users text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-4 group-hover:text-success-600 transition-colors">å®¶é•¿ååŒæ”¯æŒ</h3>
                        <p class="text-gray-600 mb-6 leading-relaxed">ä¸ºå®¶é•¿æä¾›ä¸“ä¸šæŒ‡å¯¼ï¼Œå»ºç«‹å®¶åº­æ”¯æŒç½‘ç»œï¼Œå…±åŒå…³çˆ±æ‚£å„¿æˆé•¿ä¸åº·å¤</p>
                        <div class="flex items-center text-success-600 text-sm font-medium group-hover:translate-x-2 transition-transform">
                            <span>è·å–æ”¯æŒ</span>
                            <i class="fas fa-arrow-right ml-2 group-hover:scale-110 transition-transform"></i>
                        </div>
                    </div>

                    <!-- åŠŸèƒ½å¡ç‰‡4 -->
                    <div class="bg-white rounded-2xl p-8 shadow-lg card-hover transition-all duration-500 border border-gray-100 hover:border-info-200 group">
                        <div class="w-16 h-16 bg-gradient-to-br from-info-500 to-blue-500 rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform duration-300">
                            <i class="fas fa-shield-alt text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-4 group-hover:text-info-600 transition-colors">æ•°æ®å®‰å…¨ä¿æŠ¤</h3>
                        <p class="text-gray-600 mb-6 leading-relaxed">ä¼ä¸šçº§æ•°æ®åŠ å¯†å’Œéšç§ä¿æŠ¤æŠ€æœ¯ï¼Œç¡®ä¿æ‰€æœ‰å¥åº·æ•°æ®çš„å®‰å…¨æ€§å’Œä¿å¯†æ€§</p>
                        <div class="flex items-center text-info-600 text-sm font-medium group-hover:translate-x-2 transition-transform">
                            <span>å®‰å…¨ä¿éšœ</span>
                            <i class="fas fa-arrow-right ml-2 group-hover:scale-110 transition-transform"></i>
                        </div>
                    </div>

                    <!-- åŠŸèƒ½å¡ç‰‡5 -->
                    <div class="bg-white rounded-2xl p-8 shadow-lg card-hover transition-all duration-500 border border-gray-100 hover:border-warning-200 group">
                        <div class="w-16 h-16 bg-gradient-to-br from-warning-500 to-yellow-500 rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform duration-300">
                            <i class="fas fa-chart-line text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-4 group-hover:text-warning-600 transition-colors">æ•°æ®å¯è§†åŒ–</h3>
                        <p class="text-gray-600 mb-6 leading-relaxed">ç›´è§‚çš„æ•°æ®å›¾è¡¨å’Œè¶‹åŠ¿åˆ†æï¼Œå¸®åŠ©å®¶é•¿äº†è§£åº·å¤è¿›å±•å’Œå¿ƒç†å˜åŒ–è¶‹åŠ¿</p>
                        <div class="flex items-center text-warning-600 text-sm font-medium group-hover:translate-x-2 transition-transform">
                            <span>æŸ¥çœ‹åˆ†æ</span>
                            <i class="fas fa-arrow-right ml-2 group-hover:scale-110 transition-transform"></i>
                        </div>
                    </div>

                    <!-- åŠŸèƒ½å¡ç‰‡6 -->
                    <div class="bg-white rounded-2xl p-8 shadow-lg card-hover transition-all duration-500 border border-gray-100 hover:border-secondary-200 group">
                        <div class="w-16 h-16 bg-gradient-to-br from-secondary-500 to-purple-500 rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform duration-300">
                            <i class="fas fa-hands-helping text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-4 group-hover:text-secondary-600 transition-colors">ç¤¾åŒºæ”¯æŒç½‘ç»œ</h3>
                        <p class="text-gray-600 mb-6 leading-relaxed">è¿æ¥å…¨å›½æ‚£å„¿å®¶åº­ï¼Œå»ºç«‹äº’åŠ©ç¤¾åŒºï¼Œåˆ†äº«ç»éªŒå’Œæä¾›æƒ…æ„Ÿæ”¯æŒä¸é¼“åŠ±</p>
                        <div class="flex items-center text-secondary-600 text-sm font-medium group-hover:translate-x-2 transition-transform">
                            <span>åŠ å…¥ç¤¾åŒº</span>
                            <i class="fas fa-arrow-right ml-2 group-hover:scale-110 transition-transform"></i>
                        </div>
                    </div>
                </div>

                <!-- åŠŸèƒ½ç‰¹è‰²åº•éƒ¨CTA -->
                <div class="text-center mt-16">
                    <div class="bg-white rounded-2xl p-8 shadow-lg border border-gray-100 max-w-2xl mx-auto">
                        <h3 class="text-2xl font-bold text-gray-800 mb-4">å¼€å§‹æ‚¨çš„AIå…³çˆ±ä¹‹æ—…</h3>
                        <p class="text-gray-600 mb-6">ç«‹å³ä½“éªŒå°é›ªå®AIåŠ©æ‰‹ï¼Œä¸ºæ‚¨çš„å­©å­æä¾›ä¸“ä¸šçš„ç™½è¡€ç—…æ”¯æŒæœåŠ¡</p>
                        <button onclick="scrollToChat()" class="bg-gradient-primary text-white px-8 py-3 rounded-xl font-semibold hover:shadow-lg transition-all duration-300 hover:scale-105">
                            <i class="fas fa-play mr-2"></i>
                            ç«‹å³å¼€å§‹
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- å…³äºæˆ‘ä»¬åŒºåŸŸ -->
        <section id="about" class="py-20 bg-white relative overflow-hidden">
            <!-- è£…é¥°èƒŒæ™¯ -->
            <div class="absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-primary-50 to-accent-50 rounded-full -translate-y-48 translate-x-48 opacity-60"></div>
            <div class="absolute bottom-0 left-0 w-64 h-64 bg-success-50 rounded-full -translate-x-32 translate-y-32 opacity-40"></div>
            
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                <div class="grid lg:grid-cols-2 gap-16 items-center">
                    <div class="animate-slide-up">
                        <div class="inline-flex items-center bg-primary-50 text-primary-600 px-4 py-2 rounded-full mb-6">
                            <i class="fas fa-info-circle mr-2"></i>
                            <span class="text-sm font-medium">å…³äºæˆ‘ä»¬</span>
                        </div>
                        <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-800 mb-6">
                            ç”¨<span class="text-primary-600">ç§‘æŠ€</span>ä¼ é€’<span class="text-accent-600">æ¸©æš–</span>
                        </h2>
                        <p class="text-lg text-gray-600 mb-8 leading-relaxed">
                            å°é›ªå®AIåŠ©æ‰‹æ˜¯ä¸€ä¸ªä¸“æ³¨äºç™½è¡€ç—…æ‚£å„¿åŠå®¶å±å¿ƒç†å¥åº·æ”¯æŒçš„AIå¹³å°ã€‚æˆ‘ä»¬è¿ç”¨æœ€å…ˆè¿›çš„äººå·¥æ™ºèƒ½æŠ€æœ¯ï¼Œä¸ºæ¯ä¸€ä¸ªéœ€è¦å…³çˆ±çš„å®¶åº­æä¾›<span class="text-primary-600 font-medium">ä¸“ä¸šã€æ¸©æš–ã€ä¸ªæ€§åŒ–</span>çš„æœåŠ¡ï¼Œè®©ç§‘æŠ€çœŸæ­£æœåŠ¡äºäººæ–‡å…³æ€€ã€‚
                        </p>
                        <div class="space-y-4 mb-8">
                            <div class="flex items-center space-x-4 p-3 bg-white rounded-xl shadow-sm border border-gray-100 hover:border-primary-200 transition-colors">
                                <div class="w-8 h-8 bg-success-500 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-check text-white text-sm"></i>
                                </div>
                                <span class="text-gray-700 font-medium">24/7 AIæ™ºèƒ½å®¢æœæ”¯æŒ</span>
                            </div>
                            <div class="flex items-center space-x-4 p-3 bg-white rounded-xl shadow-sm border border-gray-100 hover:border-primary-200 transition-colors">
                                <div class="w-8 h-8 bg-success-500 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-check text-white text-sm"></i>
                                </div>
                                <span class="text-gray-700 font-medium">ä¸“ä¸šåŒ»ç–—å›¢é˜Ÿå®¡æ ¸å†…å®¹</span>
                            </div>
                            <div class="flex items-center space-x-4 p-3 bg-white rounded-xl shadow-sm border border-gray-100 hover:border-primary-200 transition-colors">
                                <div class="w-8 h-8 bg-success-500 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-check text-white text-sm"></i>
                                </div>
                                <span class="text-gray-700 font-medium">ä¸ªæ€§åŒ–å¿ƒç†å¥åº·æ–¹æ¡ˆ</span>
                            </div>
                            <div class="flex items-center space-x-4 p-3 bg-white rounded-xl shadow-sm border border-gray-100 hover:border-primary-200 transition-colors">
                                <div class="w-8 h-8 bg-success-500 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-check text-white text-sm"></i>
                                </div>
                                <span class="text-gray-700 font-medium">å®Œå…¨å…è´¹çš„å…¬ç›ŠæœåŠ¡</span>
                            </div>
                        </div>
                        <button class="bg-gradient-primary text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transition-all duration-300 hover:scale-105">
                            <i class="fas fa-users mr-2"></i>
                            åŠ å…¥æˆ‘ä»¬çš„å›¢é˜Ÿ
                        </button>
                    </div>
                    <div class="relative">
                        <div class="bg-gradient-primary rounded-3xl p-8 text-white shadow-2xl relative overflow-hidden">
                            <!-- è£…é¥°å…ƒç´  -->
                            <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16"></div>
                            <div class="absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-12 -translate-x-12"></div>
                            
                            <div class="text-center relative z-10">
                                <div class="w-24 h-24 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg">
                                    <i class="fas fa-heart text-white text-3xl animate-bounce-gentle"></i>
                                </div>
                                <h3 class="text-2xl font-bold mb-4">æˆ‘ä»¬çš„ä½¿å‘½</h3>
                                <p class="text-lg opacity-90 leading-relaxed">
                                    ç”¨ç§‘æŠ€çš„åŠ›é‡æ¸©æš–æ¯ä¸€ä¸ªéœ€è¦å…³çˆ±çš„å¿ƒçµï¼Œè®©æ¯ä¸ªç™½è¡€ç—…æ‚£å„¿éƒ½èƒ½åœ¨<span class="font-semibold">å……æ»¡çˆ±ä¸å¸Œæœ›</span>çš„ç¯å¢ƒä¸­å‹‡æ•¢é¢å¯¹æŒ‘æˆ˜ï¼Œé‡æ‹¾å¥åº·ä¸å¿«ä¹ã€‚
                                </p>
                                <div class="mt-6 pt-6 border-t border-white/20">
                                    <p class="text-sm opacity-80">
                                        <i class="fas fa-quote-left mr-2"></i>
                                        ç§‘æŠ€å‘å–„ï¼Œå…³çˆ±æ— é™
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ç»Ÿè®¡æ•°æ®å¡ç‰‡ -->
                        <div class="grid grid-cols-3 gap-4 mt-8">
                            <div class="bg-white rounded-xl p-4 text-center shadow-lg border border-gray-100">
                                <div class="text-2xl font-bold text-primary-600 mb-1">100+</div>
                                <div class="text-xs text-gray-600">åŒ»ç–—ä¸“å®¶</div>
                            </div>
                            <div class="bg-white rounded-xl p-4 text-center shadow-lg border border-gray-100">
                                <div class="text-2xl font-bold text-accent-600 mb-1">500+</div>
                                <div class="text-xs text-gray-600">å—ç›Šå®¶åº­</div>
                            </div>
                            <div class="bg-white rounded-xl p-4 text-center shadow-lg border border-gray-100">
                                <div class="text-2xl font-bold text-success-600 mb-1">99%</div>
                                <div class="text-xs text-gray-600">æ»¡æ„åº¦</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- é¡µè„š -->
    <footer class="bg-gradient-to-br from-gray-900 to-gray-800 text-white py-16 relative overflow-hidden">
        <!-- è£…é¥°èƒŒæ™¯ -->
        <div class="absolute top-0 left-0 w-full h-32 bg-gradient-to-b from-primary-500/10 to-transparent"></div>
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center space-x-3 mb-6">
                        <div class="w-10 h-10 bg-gradient-primary rounded-lg flex items-center justify-center shadow-lg">
                            <i class="fas fa-heartbeat text-white"></i>
                        </div>
                        <div>
                            <span class="text-xl font-bold">å°é›ªå®AIåŠ©æ‰‹</span>
                            <p class="text-xs text-primary-300">ç™½è¡€ç—…AIå…³çˆ±å¹³å°</p>
                        </div>
                    </div>
                    <p class="text-gray-300 text-sm leading-relaxed mb-6">
                        ä¸“æ³¨äºç™½è¡€ç—…æ‚£å„¿å¿ƒç†å¥åº·æ”¯æŒçš„AIå¹³å°ï¼Œç”¨ç§‘æŠ€ä¼ é€’æ¸©æš–ä¸å¸Œæœ›ï¼Œè®©æ¯ä¸ªå­©å­éƒ½èƒ½åœ¨å…³çˆ±ä¸­æˆé•¿ã€‚
                    </p>
                    <div class="flex space-x-3">
                        <a href="#" class="w-8 h-8 bg-gray-700 hover:bg-primary-600 rounded-full flex items-center justify-center transition-colors">
                            <i class="fab fa-weixin text-sm"></i>
                        </a>
                        <a href="#" class="w-8 h-8 bg-gray-700 hover:bg-blue-600 rounded-full flex items-center justify-center transition-colors">
                            <i class="fab fa-weibo text-sm"></i>
                        </a>
                        <a href="#" class="w-8 h-8 bg-gray-700 hover:bg-gray-600 rounded-full flex items-center justify-center transition-colors">
                            <i class="fab fa-github text-sm"></i>
                        </a>
                    </div>
                </div>
                <div>
                    <h4 class="font-semibold mb-6 text-lg">æ ¸å¿ƒåŠŸèƒ½</h4>
                    <ul class="space-y-3 text-sm">
                        <li>
                            <a href="#chat" class="text-gray-300 hover:text-white transition-colors flex items-center group">
                                <i class="fas fa-robot mr-2 text-primary-400 group-hover:scale-110 transition-transform"></i>
                                AIæ™ºèƒ½é—®ç­”
                            </a>
                        </li>
                        <li>
                            <a href="#features" class="text-gray-300 hover:text-white transition-colors flex items-center group">
                                <i class="fas fa-heart mr-2 text-accent-400 group-hover:scale-110 transition-transform"></i>
                                æƒ…ç»ªè¯†åˆ«åˆ†æ
                            </a>
                        </li>
                        <li>
                            <a href="#features" class="text-gray-300 hover:text-white transition-colors flex items-center group">
                                <i class="fas fa-users mr-2 text-success-400 group-hover:scale-110 transition-transform"></i>
                                å®¶é•¿ååŒæ”¯æŒ
                            </a>
                        </li>
                        <li>
                            <a href="#features" class="text-gray-300 hover:text-white transition-colors flex items-center group">
                                <i class="fas fa-hands-helping mr-2 text-secondary-400 group-hover:scale-110 transition-transform"></i>
                                ç¤¾åŒºæ”¯æŒç½‘ç»œ
                            </a>
                        </li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-6 text-lg">å¸®åŠ©ä¸­å¿ƒ</h4>
                    <ul class="space-y-3 text-sm">
                        <li>
                            <a href="#" class="text-gray-300 hover:text-white transition-colors flex items-center group">
                                <i class="fas fa-book mr-2 text-info-400 group-hover:scale-110 transition-transform"></i>
                                ä½¿ç”¨æŒ‡å—
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-gray-300 hover:text-white transition-colors flex items-center group">
                                <i class="fas fa-question-circle mr-2 text-warning-400 group-hover:scale-110 transition-transform"></i>
                                å¸¸è§é—®é¢˜
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-gray-300 hover:text-white transition-colors flex items-center group">
                                <i class="fas fa-shield-alt mr-2 text-success-400 group-hover:scale-110 transition-transform"></i>
                                éšç§æ”¿ç­–
                            </a>
                        </li>
                        <li>
                            <a href="#" class="text-gray-300 hover:text-white transition-colors flex items-center group">
                                <i class="fas fa-file-contract mr-2 text-gray-400 group-hover:scale-110 transition-transform"></i>
                                æœåŠ¡æ¡æ¬¾
                            </a>
                        </li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-6 text-lg">è”ç³»æˆ‘ä»¬</h4>
                    <ul class="space-y-3 text-sm">
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-envelope mr-3 text-primary-400"></i>
                            support@xiaoxuebao.ai
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-phone mr-3 text-accent-400"></i>
                            400-123-4567
                        </li>
                        <li class="flex items-center text-gray-300">
                            <i class="fas fa-map-marker-alt mr-3 text-success-400"></i>
                            åŒ—äº¬å¸‚æœé˜³åŒº
                        </li>
                    </ul>
                    <div class="mt-6 p-4 bg-gray-800 rounded-xl">
                        <p class="text-xs text-gray-400 mb-2">è®¢é˜…æˆ‘ä»¬çš„èµ„è®¯</p>
                        <div class="flex space-x-2">
                            <input type="email" placeholder="æ‚¨çš„é‚®ç®±" class="flex-1 px-3 py-2 bg-gray-700 text-white text-sm rounded-lg border border-gray-600 focus:outline-none focus:border-primary-400">
                            <button class="bg-primary-600 hover:bg-primary-700 px-3 py-2 rounded-lg text-sm transition-colors">
                                è®¢é˜…
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-12 pt-8 text-center">
                <p class="text-sm text-gray-400">
                    &copy; 2024 å°é›ªå®AIåŠ©æ‰‹. ä¿ç•™æ‰€æœ‰æƒåˆ©. | 
                    <span class="text-primary-300">è¿™æ˜¯ä¸€ä¸ªå…¬ç›Šé¡¹ç›®ï¼Œè‡´åŠ›äºå¸®åŠ©ç™½è¡€ç—…æ‚£å„¿åŠå®¶å±</span>
                </p>
                <p class="text-xs text-gray-500 mt-2">
                    <i class="fas fa-heart text-accent-400 mr-1"></i>
                    ç”¨ç§‘æŠ€ä¼ é€’æ¸©æš–ï¼Œè®©å…³çˆ±æ— å¤„ä¸åœ¨
                </p>
            </div>
        </div>
    </footer>

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="å°é›ªå®AIåŠ©æ‰‹">
    <link rel="apple-touch-icon" href="/static/icons/icon-192x192.png">
    
    <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
    <link rel="preload" href="https://cdn.tailwindcss.com" as="script">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" as="style">
    
    <!-- å…³é”®CSSå†…è” -->
    <style>
        /* å…³é”®æ¸²æŸ“è·¯å¾„CSS */
        .critical-css {
            font-family: 'Inter', sans-serif;
            background: #f8fafc;
            color: #1e293b;
        }
        .loading-spinner {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: #f8fafc;
        }
    </style>
    
    <!-- JavaScript -->
    <script>
        // å…¨å±€å˜é‡
        let isTyping = false;
        let messageCount = 0;
        let isOnline = navigator.onLine;
        
        // ç¦»çº¿çŠ¶æ€æ£€æµ‹
        window.addEventListener('online', () => {
            isOnline = true;
            showToast('ç½‘ç»œè¿æ¥å·²æ¢å¤', 'success');
        });
        
        window.addEventListener('offline', () => {
            isOnline = false;
            showToast('ç½‘ç»œè¿æ¥å·²æ–­å¼€ï¼Œéƒ¨åˆ†åŠŸèƒ½å¯èƒ½å—é™', 'warning');
        });

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æ·»åŠ åŠ¨ç”»æ•ˆæœ
            const elements = document.querySelectorAll('.animate-fade-in, .animate-slide-up');
            elements.forEach((el, index) => {
                setTimeout(() => {
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });

        // æ»šåŠ¨åˆ°èŠå¤©åŒºåŸŸ
        function scrollToChat() {
            document.getElementById('chat').scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
            // èšç„¦åˆ°è¾“å…¥æ¡†
            setTimeout(() => {
                document.getElementById('message-input').focus();
            }, 500);
        }

        // å¤„ç†é”®ç›˜äº‹ä»¶
        function handleKeyDown(event) {
            if (event.ctrlKey && event.key === 'Enter') {
                event.preventDefault();
                sendMessage();
            }
        }

        // è‡ªåŠ¨è°ƒæ•´è¾“å…¥æ¡†é«˜åº¦
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
        }

        // å‘é€å¿«æ·é—®é¢˜
        function sendQuickQuestion(question) {
            document.getElementById('message-input').value = question;
            sendMessage();
        }

        // åˆ‡æ¢çŸ¥è¯†åº“æœç´¢ç•Œé¢
        function toggleKnowledgeSearch() {
            const searchDiv = document.getElementById('knowledge-search');
            const quickQuestions = document.getElementById('quick-questions');

            if (searchDiv.classList.contains('hidden')) {
                searchDiv.classList.remove('hidden');
                quickQuestions.classList.add('hidden');
                document.getElementById('kb-search-input').focus();
            } else {
                searchDiv.classList.add('hidden');
                quickQuestions.classList.remove('hidden');
                document.getElementById('kb-search-results').classList.add('hidden');
            }
        }

        // å¤„ç†çŸ¥è¯†åº“æœç´¢é”®ç›˜äº‹ä»¶
        function handleKbSearchKeyDown(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                searchKnowledge();
            }
        }

        // åˆ‡æ¢é«˜çº§æœç´¢
        function toggleAdvancedSearch() {
            const advancedDiv = document.getElementById('advanced-search');
            if (advancedDiv.classList.contains('hidden')) {
                advancedDiv.classList.remove('hidden');
            } else {
                advancedDiv.classList.add('hidden');
            }
        }

        // åˆ‡æ¢å¿«é€Ÿåˆ†ç±»
        function toggleQuickCategories() {
            const categoriesDiv = document.getElementById('quick-categories');
            const toggleIcon = document.getElementById('category-toggle-icon');
            const toggleButton = toggleIcon.parentElement;

            if (categoriesDiv.classList.contains('hidden')) {
                categoriesDiv.classList.remove('hidden');
                toggleIcon.className = 'fas fa-chevron-up mr-1';
                toggleButton.innerHTML = '<i class="fas fa-chevron-up mr-1"></i>æ”¶èµ·';
            } else {
                categoriesDiv.classList.add('hidden');
                toggleIcon.className = 'fas fa-chevron-down mr-1';
                toggleButton.innerHTML = '<i class="fas fa-chevron-down mr-1"></i>å±•å¼€';
            }
        }

        // æ¸…é™¤æœç´¢ç­›é€‰
        function clearSearchFilters() {
            document.getElementById('category-filter').value = '';
            document.getElementById('min-score-filter').value = '0';
            document.getElementById('kb-search-input').value = '';
            document.getElementById('kb-search-results').classList.add('hidden');
        }

        // æ˜¾ç¤ºæœç´¢ç»Ÿè®¡
        function showSearchStats() {
            const statsDiv = document.getElementById('search-stats');
            if (statsDiv.classList.contains('hidden')) {
                getSearchStats();
                statsDiv.classList.remove('hidden');
            } else {
                statsDiv.classList.add('hidden');
            }
        }

        // éšè—æœç´¢ç»Ÿè®¡
        function hideSearchStats() {
            document.getElementById('search-stats').classList.add('hidden');
        }

        // è·å–æœç´¢ç»Ÿè®¡
        async function getSearchStats() {
            const statsContent = document.getElementById('stats-content');

            try {
                statsContent.innerHTML = 'åŠ è½½ç»Ÿè®¡ä¿¡æ¯...';

                // è·å–åˆ†ç±»ç»Ÿè®¡
                const categoriesResponse = await fetch('/api/v1/knowledge/categories');
                const categoriesResult = await categoriesResponse.json();

                // è·å–å…³é”®è¯ç»Ÿè®¡
                const keywordsResponse = await fetch('/api/v1/knowledge/keywords?limit=10');
                const keywordsResult = await keywordsResponse.json();

                let html = '';

                if (categoriesResult.success) {
                    html += '<div class="mb-3"><strong>åˆ†ç±»ç»Ÿè®¡:</strong><div class="mt-1 space-y-1">';
                    Object.entries(categoriesResult.data.categories).forEach(([category, count]) => {
                        html += `<div class="flex justify-between"><span>${category}:</span><span class="font-medium">${count}æ¡</span></div>`;
                    });
                    html += `</div><div class="mt-2 text-gray-500">æ€»è®¡: ${categoriesResult.data.total_items}æ¡çŸ¥è¯†</div></div>`;
                }

                if (keywordsResult.success) {
                    html += '<div><strong>çƒ­é—¨å…³é”®è¯:</strong><div class="mt-1 flex flex-wrap gap-1">';
                    keywordsResult.data.keywords.slice(0, 8).forEach(keyword => {
                        html += `<span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">${keyword.keyword}</span>`;
                    });
                    html += '</div></div>';
                }

                statsContent.innerHTML = html || 'æš‚æ— ç»Ÿè®¡ä¿¡æ¯';

            } catch (error) {
                statsContent.innerHTML = `<div class="text-red-500">è·å–ç»Ÿè®¡å¤±è´¥: ${error.message}</div>`;
            }
        }

        // æœç´¢çŸ¥è¯†åº“ - å¸¸è§„æœç´¢
        async function searchKnowledge() {
            const input = document.getElementById('kb-search-input');
            const resultsDiv = document.getElementById('kb-search-results');
            const categoryFilter = document.getElementById('category-filter');
            const minScoreFilter = document.getElementById('min-score-filter');
            const query = input.value.trim();

            if (!query) {
                alert('è¯·è¾“å…¥æœç´¢å…³é”®è¯');
                return;
            }

            try {
                resultsDiv.innerHTML = '<div class="text-sm text-blue-500 p-3 bg-blue-50 rounded-lg"><i class="fas fa-search mr-2"></i>å¸¸è§„æœç´¢ä¸­...</div>';
                resultsDiv.classList.remove('hidden');

                // æ„å»ºæœç´¢URL
                let searchUrl = `/api/v1/knowledge/search?q=${encodeURIComponent(query)}&limit=5`;
                if (categoryFilter.value) {
                    searchUrl += `&category=${encodeURIComponent(categoryFilter.value)}`;
                }
                if (minScoreFilter.value) {
                    searchUrl += `&min_score=${minScoreFilter.value}`;
                }

                const response = await fetch(searchUrl);
                const result = await response.json();

                displaySearchResults(result, 'ğŸ” å¸¸è§„æœç´¢ç»“æœ', 'blue', 'primary');

            } catch (error) {
                console.error('çŸ¥è¯†åº“æœç´¢å¤±è´¥:', error);
                resultsDiv.innerHTML = '<div class="text-sm text-red-500 p-3 bg-red-50 rounded-lg"><i class="fas fa-exclamation-triangle mr-2"></i>æœç´¢å¤±è´¥ï¼Œè¯·ç¨åå†è¯•</div>';
            }
        }

        // æ˜¾ç¤ºæœç´¢ç»“æœçš„é€šç”¨å‡½æ•°
        function displaySearchResults(result, title, bgColor, badgeColor) {
            const resultsDiv = document.getElementById('kb-search-results');

            let html = `
                <div class="bg-${bgColor}-50 p-3 rounded-lg mb-3 border border-${bgColor}-200">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-semibold text-${bgColor}-800">${title}</h4>
                        <button onclick="document.getElementById('kb-search-results').classList.add('hidden')" class="text-${bgColor}-400 hover:text-${bgColor}-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="text-sm text-${bgColor}-600">
                        æŸ¥è¯¢è¯ï¼š${result.data.query} |
                        ç»“æœæ•°ï¼š${result.data.total || result.data.total_results} |
                        æœç´¢æ—¶é—´ï¼š${result.data.search_time}ç§’
                        ${result.data.filters && result.data.filters.category ? ` | åˆ†ç±»ï¼š${result.data.filters.category}` : ''}
                        ${result.data.filters && result.data.filters.min_score > 0 ? ` | æœ€ä½åˆ†ï¼š${result.data.filters.min_score}` : ''}
                    </div>
                </div>
            `;

            if (result.success && (result.data.results || result.data.items) && (result.data.results || result.data.items).length > 0) {
                const items = result.data.results || result.data.items;
                html += '<div class="space-y-3">';

                items.forEach((item, index) => {
                    html += `
                        <div class="bg-white rounded-lg p-3 border border-${bgColor}-200 hover:border-${badgeColor} transition-colors cursor-pointer shadow-sm" onclick="useKnowledgeItem('${item.title}', '${escapeHtml(item.full_content || item.content)}')">
                            <div class="flex items-center justify-between mb-2">
                                <h5 class="font-medium text-gray-800 text-sm">${item.title}</h5>
                                <span class="text-xs bg-${badgeColor} text-white px-2 py-1 rounded-full">${item.category}</span>
                            </div>
                            <p class="text-xs text-gray-600 mb-2 leading-relaxed">${item.content}</p>
                            <div class="flex items-center justify-between text-xs">
                                <span class="text-gray-500">
                                    <i class="fas fa-star mr-1"></i>ç›¸å…³åº¦: ${item.relevance_score}
                                </span>
                                <span class="text-${badgeColor}">
                                    <i class="fas fa-mouse-pointer mr-1"></i>ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…
                                </span>
                            </div>
                            <div class="text-xs text-gray-400 mt-2 flex items-center">
                                <i class="fas fa-tags mr-1"></i>
                                <span>å…³é”®è¯: ${item.keywords.join(', ')}</span>
                            </div>
                        </div>
                    `;
                });

                html += '</div>';
            } else {
                html += '<div class="text-sm text-gray-500 p-4 bg-gray-50 rounded-lg text-center"><i class="fas fa-search mr-2"></i>æœªæ‰¾åˆ°ç›¸å…³ä¿¡æ¯</div>';
            }

            resultsDiv.innerHTML = html;
        }

        // æ™ºèƒ½æœç´¢
        async function smartSearchKnowledge() {
            const input = document.getElementById('kb-search-input');
            const resultsDiv = document.getElementById('kb-search-results');
            const query = input.value.trim();

            if (!query) {
                alert('è¯·è¾“å…¥æœç´¢å…³é”®è¯');
                return;
            }

            try {
                resultsDiv.innerHTML = '<div class="text-sm text-purple-500 p-3 bg-purple-50 rounded-lg"><i class="fas fa-magic mr-2"></i>æ™ºèƒ½æœç´¢ä¸­...</div>';
                resultsDiv.classList.remove('hidden');

                const response = await fetch(`/api/v1/knowledge/smart-search?q=${encodeURIComponent(query)}&limit=5`);
                const result = await response.json();

                displaySmartSearchResults(result);

            } catch (error) {
                console.error('æ™ºèƒ½æœç´¢å¤±è´¥:', error);
                resultsDiv.innerHTML = '<div class="text-sm text-red-500 p-3 bg-red-50 rounded-lg"><i class="fas fa-exclamation-triangle mr-2"></i>æ™ºèƒ½æœç´¢å¤±è´¥ï¼Œè¯·ç¨åå†è¯•</div>';
            }
        }

        // æ˜¾ç¤ºæ™ºèƒ½æœç´¢ç»“æœ
        function displaySmartSearchResults(result) {
            const resultsDiv = document.getElementById('kb-search-results');

            let html = `
                <div class="bg-purple-50 p-3 rounded-lg mb-3 border border-purple-200">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-semibold text-purple-800">ğŸ§  æ™ºèƒ½æœç´¢ç»“æœ</h4>
                        <button onclick="document.getElementById('kb-search-results').classList.add('hidden')" class="text-purple-400 hover:text-purple-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="text-sm text-purple-600">
                        æŸ¥è¯¢è¯ï¼š${result.data.query} |
                        ç»“æœæ•°ï¼š${result.data.total_results} |
                        æœç´¢æ—¶é—´ï¼š${result.data.search_time}ç§’
                    </div>
                </div>
            `;

            if (result.success && result.data.results.length > 0) {
                // æœç´¢ç»“æœ
                html += '<div class="space-y-3 mb-4">';
                result.data.results.forEach((item, index) => {
                    html += `
                        <div class="bg-white rounded-lg p-3 border border-purple-200 hover:border-secondary transition-colors cursor-pointer shadow-sm" onclick="useKnowledgeItem('${item.title}', '${escapeHtml(item.full_content || item.content)}')">
                            <div class="flex items-center justify-between mb-2">
                                <h5 class="font-medium text-gray-800 text-sm">${item.title}</h5>
                                <span class="text-xs bg-secondary text-white px-2 py-1 rounded-full">${item.category}</span>
                            </div>
                            <p class="text-xs text-gray-600 mb-2 leading-relaxed">${item.content}</p>
                            <div class="flex items-center justify-between text-xs">
                                <span class="text-gray-500">
                                    <i class="fas fa-brain mr-1"></i>æ™ºèƒ½è¯„åˆ†: ${item.relevance_score}
                                </span>
                                <span class="text-secondary">
                                    <i class="fas fa-magic mr-1"></i>æ™ºèƒ½åŒ¹é…
                                </span>
                            </div>
                            <div class="text-xs text-gray-400 mt-2 flex items-center">
                                <i class="fas fa-tags mr-1"></i>
                                <span>å…³é”®è¯: ${item.keywords.join(', ')}</span>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';

                // æœç´¢å»ºè®®
                if (result.data.suggestions && result.data.suggestions.length > 0) {
                    html += `
                        <div class="bg-yellow-50 p-3 rounded-lg mb-3 border border-yellow-200">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-lightbulb mr-2 text-yellow-600"></i>
                                <h5 class="font-medium text-yellow-800">æœç´¢å»ºè®®</h5>
                            </div>
                            <div class="flex flex-wrap gap-2">
                    `;
                    result.data.suggestions.forEach(suggestion => {
                        html += `<button onclick="document.getElementById('kb-search-input').value='${suggestion}'; smartSearchKnowledge();" class="text-xs bg-yellow-100 hover:bg-yellow-200 px-3 py-1 rounded-full border border-yellow-300 transition-colors">${suggestion}</button>`;
                    });
                    html += '</div></div>';
                }

                // ç›¸å…³åˆ†ç±»
                if (result.data.related_categories && result.data.related_categories.length > 0) {
                    html += `
                        <div class="bg-green-50 p-3 rounded-lg border border-green-200">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-folder-open mr-2 text-green-600"></i>
                                <h5 class="font-medium text-green-800">ç›¸å…³åˆ†ç±»</h5>
                            </div>
                            <div class="flex flex-wrap gap-2">
                    `;
                    result.data.related_categories.forEach(cat => {
                        html += `<button onclick="searchByCategory('${cat.category}')" class="text-xs bg-green-100 hover:bg-green-200 px-3 py-1 rounded-full border border-green-300 transition-colors">${cat.category} (${cat.item_count}æ¡)</button>`;
                    });
                    html += '</div></div>';
                }

            } else {
                html += '<div class="text-sm text-gray-500 p-4 bg-gray-50 rounded-lg text-center"><i class="fas fa-search mr-2"></i>æœªæ‰¾åˆ°ç›¸å…³ç»“æœ</div>';
            }

            resultsDiv.innerHTML = html;
        }

        // æŒ‰åˆ†ç±»æœç´¢
        async function searchByCategory(category) {
            const resultsDiv = document.getElementById('kb-search-results');

            try {
                resultsDiv.innerHTML = `<div class="text-sm text-green-500 p-3 bg-green-50 rounded-lg"><i class="fas fa-folder-open mr-2"></i>åŠ è½½åˆ†ç±» "${category}" ä¸­...</div>`;
                resultsDiv.classList.remove('hidden');

                const response = await fetch(`/api/v1/knowledge/category/${encodeURIComponent(category)}`);
                const result = await response.json();

                displayCategoryResults(result, category);

            } catch (error) {
                console.error('åˆ†ç±»æœç´¢å¤±è´¥:', error);
                resultsDiv.innerHTML = '<div class="text-sm text-red-500 p-3 bg-red-50 rounded-lg"><i class="fas fa-exclamation-triangle mr-2"></i>åˆ†ç±»æœç´¢å¤±è´¥ï¼Œè¯·ç¨åå†è¯•</div>';
            }
        }

        // æ˜¾ç¤ºåˆ†ç±»ç»“æœ
        function displayCategoryResults(result, category) {
            const resultsDiv = document.getElementById('kb-search-results');

            // è·å–åˆ†ç±»å¯¹åº”çš„å›¾æ ‡
            const categoryIcons = {
                'ç–¾ç—…çŸ¥è¯†': 'fas fa-hospital',
                'æ²»ç–—æŠ¤ç†': 'fas fa-pills',
                'å¿ƒç†å¥åº·': 'fas fa-heart',
                'è¥å…»æŒ‡å¯¼': 'fas fa-apple-alt',
                'å®¶é•¿æ”¯æŒ': 'fas fa-users',
                'ç”Ÿæ´»æŒ‡å¯¼': 'fas fa-home'
            };

            const icon = categoryIcons[category] || 'fas fa-folder';

            let html = `
                <div class="bg-green-50 p-3 rounded-lg mb-3 border border-green-200">
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-semibold text-green-800">
                            <i class="${icon} mr-2"></i>åˆ†ç±»æµè§ˆï¼š${category}
                        </h4>
                        <button onclick="document.getElementById('kb-search-results').classList.add('hidden')" class="text-green-400 hover:text-green-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="text-sm text-green-600">
                        åˆ†ç±»ï¼š${result.data.category} |
                        å†…å®¹æ•°ï¼š${result.data.total} |
                        æœç´¢æ—¶é—´ï¼š${result.data.search_time}ç§’
                    </div>
                </div>
            `;

            if (result.success && result.data.results.length > 0) {
                html += '<div class="space-y-3">';

                result.data.results.forEach((item, index) => {
                    html += `
                        <div class="bg-white rounded-lg p-3 border border-green-200 hover:border-green-400 transition-colors cursor-pointer shadow-sm" onclick="useKnowledgeItem('${item.title}', '${escapeHtml(item.full_content || item.content)}')">
                            <div class="flex items-center justify-between mb-2">
                                <h5 class="font-medium text-gray-800 text-sm">${item.title}</h5>
                                <span class="text-xs bg-green-500 text-white px-2 py-1 rounded-full">${item.category}</span>
                            </div>
                            <p class="text-xs text-gray-600 mb-2 leading-relaxed">${item.content}</p>
                            <div class="flex items-center justify-between text-xs">
                                <span class="text-gray-500">
                                    <i class="fas fa-folder mr-1"></i>åˆ†ç±»å†…å®¹
                                </span>
                                <span class="text-green-600">
                                    <i class="fas fa-mouse-pointer mr-1"></i>ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…
                                </span>
                            </div>
                            <div class="text-xs text-gray-400 mt-2 flex items-center">
                                <i class="fas fa-tags mr-1"></i>
                                <span>å…³é”®è¯: ${item.keywords.join(', ')}</span>
                            </div>
                        </div>
                    `;
                });

                html += '</div>';
            } else {
                html += '<div class="text-sm text-gray-500 p-4 bg-gray-50 rounded-lg text-center"><i class="fas fa-folder-open mr-2"></i>è¯¥åˆ†ç±»ä¸‹æš‚æ— å†…å®¹</div>';
            }

            resultsDiv.innerHTML = html;
        }

        // HTMLè½¬ä¹‰å‡½æ•°
        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, function(m) { return map[m]; });
        }

        // ä½¿ç”¨çŸ¥è¯†åº“æ¡ç›®
        function useKnowledgeItem(title, content) {
            // å°†çŸ¥è¯†åº“å†…å®¹ä½œä¸ºé—®é¢˜å‘é€
            const question = `è¯·è¯¦ç»†ä»‹ç»ï¼š${title}`;
            document.getElementById('message-input').value = question;

            // å…³é—­çŸ¥è¯†åº“æœç´¢ç•Œé¢
            toggleKnowledgeSearch();

            // å‘é€æ¶ˆæ¯
            sendMessage();
        }

        // è¯¢é—®çŸ¥è¯†åº“ç›¸å…³é—®é¢˜
        function askAboutKnowledge(title) {
            const input = document.getElementById('message-input');
            input.value = `è¯·è¯¦ç»†è§£é‡Šä¸€ä¸‹"${title}"ç›¸å…³çš„å†…å®¹`;
            input.focus();
        }

        // å¿«æ·æœç´¢å‡½æ•°
        function quickSearch(query) {
            document.getElementById('kb-search-input').value = query;
            smartSearchKnowledge();
        }

        // å‘é€æ¶ˆæ¯
        async function sendMessage() {
            const input = document.getElementById('message-input');
            const sendButton = document.getElementById('send-button');
            const message = input.value.trim();

            if (!message || isTyping) return;
            
            // æ£€æŸ¥ç½‘ç»œçŠ¶æ€
            if (!isOnline) {
                showToast('ç½‘ç»œè¿æ¥å·²æ–­å¼€ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•', 'warning');
                return;
            }

            // ç¦ç”¨è¾“å…¥å’ŒæŒ‰é’®
            input.disabled = true;
            sendButton.disabled = true;
            isTyping = true;

            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            addUserMessage(message);

            // æ¸…ç©ºè¾“å…¥æ¡†
            input.value = '';
            input.style.height = 'auto';

            try {
                // æ·»åŠ AIæ€è€ƒæŒ‡ç¤ºå™¨
                addTypingIndicator();

                // æ·»åŠ è¶…æ—¶æ§åˆ¶
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 30000); // 30ç§’è¶…æ—¶

                // è°ƒç”¨AI API
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        message: message,
                        context: 'ç™½è¡€ç—…AIå…³çˆ±å¹³å°å¯¹è¯'
                    }),
                    signal: controller.signal
                });

                clearTimeout(timeoutId);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();

                // ç§»é™¤æ€è€ƒæŒ‡ç¤ºå™¨
                removeTypingIndicator();

                // æ·»åŠ AIå›å¤
                addAIMessage(data.answer, data.source);

            } catch (error) {
                console.error('å‘é€æ¶ˆæ¯å¤±è´¥:', error);
                removeTypingIndicator();
                
                let errorMessage = 'æŠ±æ­‰ï¼Œæˆ‘ç°åœ¨æ— æ³•å›å¤æ‚¨çš„æ¶ˆæ¯ã€‚è¯·ç¨åå†è¯•ï¼Œæˆ–è”ç³»æˆ‘ä»¬çš„æŠ€æœ¯æ”¯æŒã€‚';
                
                if (error.name === 'AbortError') {
                    errorMessage = 'è¯·æ±‚è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•';
                } else if (!isOnline) {
                    errorMessage = 'ç½‘ç»œè¿æ¥å·²æ–­å¼€ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•';
                }
                
                addAIMessage(errorMessage, 'ç³»ç»Ÿæç¤º');
            } finally {
                // é‡æ–°å¯ç”¨è¾“å…¥å’ŒæŒ‰é’®
                input.disabled = false;
                sendButton.disabled = false;
                isTyping = false;
                input.focus();
            }
        }

        // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
        function addUserMessage(message) {
            const chatMessages = document.getElementById('chat-messages');
            const messageElement = document.createElement('div');
            messageElement.className = 'flex items-start space-x-3 justify-end animate-fade-in';

            messageElement.innerHTML = `
                <div class="message-user rounded-2xl rounded-tr-sm p-4 max-w-md text-right">
                    <p class="text-sm">${escapeHtml(message)}</p>
                    <p class="text-xs opacity-75 mt-1">${getCurrentTime()}</p>
                </div>
                <div class="w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-user text-white text-sm"></i>
                </div>
            `;

            chatMessages.appendChild(messageElement);
            scrollToBottom();
        }

        // æ·»åŠ AIæ¶ˆæ¯
        function addAIMessage(message, source = 'å°é›ªå®AIåŠ©æ‰‹') {
            const chatMessages = document.getElementById('chat-messages');
            const messageElement = document.createElement('div');
            messageElement.className = 'flex items-start space-x-3 animate-fade-in';

            // æ£€æŸ¥æ˜¯å¦æ˜¯çŸ¥è¯†åº“å¢å¼ºçš„å›ç­”
            const isKnowledgeEnhanced = source.includes('çŸ¥è¯†åº“å¢å¼º');
            const knowledgeIcon = isKnowledgeEnhanced ? '<i class="fas fa-book text-primary text-xs mr-1"></i>' : '';

            messageElement.innerHTML = `
                <div class="w-8 h-8 bg-gradient-primary rounded-full flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-robot text-white text-sm"></i>
                </div>
                <div class="message-ai rounded-2xl rounded-tl-sm p-4 max-w-md">
                    ${isKnowledgeEnhanced ? '<div class="flex items-center mb-2 text-xs text-primary"><i class="fas fa-book mr-1"></i>åŸºäºä¸“ä¸šçŸ¥è¯†åº“å›ç­”</div>' : ''}
                    <p class="text-sm">${formatMessage(message)}</p>
                    <p class="text-xs opacity-75 mt-1">${knowledgeIcon}${source} â€¢ ${getCurrentTime()}</p>
                </div>
            `;

            chatMessages.appendChild(messageElement);
            scrollToBottom();
        }

        // æ·»åŠ æ€è€ƒæŒ‡ç¤ºå™¨
        function addTypingIndicator() {
            const chatMessages = document.getElementById('chat-messages');
            const typingElement = document.createElement('div');
            typingElement.id = 'typing-indicator';
            typingElement.className = 'flex items-start space-x-3 animate-fade-in';

            typingElement.innerHTML = `
                <div class="w-8 h-8 bg-gradient-primary rounded-full flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-robot text-white text-sm"></i>
                </div>
                <div class="message-ai rounded-2xl rounded-tl-sm p-4">
                    <div class="flex items-center space-x-1">
                        <div class="w-2 h-2 bg-primary rounded-full animate-bounce" style="animation-delay: 0s;"></div>
                        <div class="w-2 h-2 bg-primary rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
                        <div class="w-2 h-2 bg-primary rounded-full animate-bounce" style="animation-delay: 0.4s;"></div>
                        <span class="text-xs text-gray-500 ml-2">AIæ­£åœ¨æ€è€ƒä¸­...</span>
                    </div>
                </div>
            `;

            chatMessages.appendChild(typingElement);
            scrollToBottom();
        }

        // ç§»é™¤æ€è€ƒæŒ‡ç¤ºå™¨
        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // æ¸…ç©ºèŠå¤©è®°å½•
        function clearChat() {
            const chatMessages = document.getElementById('chat-messages');
            // ä¿ç•™æ¬¢è¿æ¶ˆæ¯
            const welcomeMessage = chatMessages.firstElementChild;
            chatMessages.innerHTML = '';
            chatMessages.appendChild(welcomeMessage);
            messageCount = 0;
        }

        // æ»šåŠ¨åˆ°åº•éƒ¨
        function scrollToBottom() {
            const chatMessages = document.getElementById('chat-messages');
            setTimeout(() => {
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 100);
        }

        // è·å–å½“å‰æ—¶é—´
        function getCurrentTime() {
            const now = new Date();
            return now.toLocaleTimeString('zh-CN', {
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // HTMLè½¬ä¹‰
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // æ ¼å¼åŒ–æ¶ˆæ¯ï¼ˆæ”¯æŒæ¢è¡Œï¼‰
        function formatMessage(text) {
            return escapeHtml(text).replace(/\n/g, '<br>');
        }

        // å¹³æ»‘æ»šåŠ¨åˆ°æŒ‡å®šå…ƒç´ 
        function smoothScrollTo(element) {
            element.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }

        // ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const isHidden = menu.classList.contains('hidden');
            
            if (isHidden) {
                menu.classList.remove('hidden');
                menu.style.transform = 'translateY(0)';
                document.body.style.overflow = 'hidden';
            } else {
                menu.classList.add('hidden');
                document.body.style.overflow = '';
            }
        }

        // ç‚¹å‡»å¤–éƒ¨å…³é—­ç§»åŠ¨ç«¯èœå•
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('mobile-menu');
            const menuBtn = document.querySelector('.mobile-menu-btn');
            
            if (!menu.classList.contains('hidden') && 
                !menu.contains(event.target) && 
                !menuBtn.contains(event.target)) {
                toggleMobileMenu();
            }
        });

        // çª—å£å¤§å°å˜åŒ–æ—¶å…³é—­ç§»åŠ¨ç«¯èœå•
        window.addEventListener('resize', function() {
            if (window.innerWidth >= 768) {
                const menu = document.getElementById('mobile-menu');
                if (!menu.classList.contains('hidden')) {
                    menu.classList.add('hidden');
                    document.body.style.overflow = '';
                }
            }
        });

        // ç§»åŠ¨ç«¯è§¦æ‘¸ä¼˜åŒ–
        let touchStartY = 0;
        let touchEndY = 0;

        document.addEventListener('touchstart', function(e) {
            touchStartY = e.changedTouches[0].screenY;
        });

        document.addEventListener('touchend', function(e) {
            touchEndY = e.changedTouches[0].screenY;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeDistance = touchEndY - touchStartY;
            
            // å‘ä¸‹æ»‘åŠ¨å…³é—­ç§»åŠ¨ç«¯èœå•
            if (swipeDistance > 50) {
                const menu = document.getElementById('mobile-menu');
                if (!menu.classList.contains('hidden')) {
                    toggleMobileMenu();
                }
            }
        }

        // ç§»åŠ¨ç«¯è¾“å…¥æ¡†ä¼˜åŒ–
        function setupMobileInput() {
            const input = document.getElementById('message-input');
            
            input.addEventListener('focus', function() {
                // åœ¨ç§»åŠ¨ç«¯èšç„¦æ—¶æ»šåŠ¨åˆ°è¾“å…¥æ¡†
                if (window.innerWidth < 768) {
                    setTimeout(() => {
                        input.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 300);
                }
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–ç§»åŠ¨ç«¯åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            // éšè—åŠ è½½æŒ‡ç¤ºå™¨
            setTimeout(() => {
                const spinner = document.getElementById('loading-spinner');
                if (spinner) {
                    spinner.style.opacity = '0';
                    setTimeout(() => spinner.remove(), 300);
                }
            }, 500);
            
            setupMobileInput();
            initializePerformanceMonitoring();
            checkServiceWorkerSupport();
            initializeAnalytics();
        });
        
        // åˆå§‹åŒ–åˆ†æå·¥å…·
        function initializeAnalytics() {
            // ç®€å•çš„é¡µé¢è®¿é—®ç»Ÿè®¡
            const pageViewData = {
                page: window.location.pathname,
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                screen: `${screen.width}x${screen.height}`,
                language: navigator.language
            };
            
            // å¯ä»¥å‘é€åˆ°åˆ†ææœåŠ¡
            console.log('é¡µé¢è®¿é—®æ•°æ®:', pageViewData);
            
            // è®°å½•ç”¨æˆ·äº¤äº’
            document.addEventListener('click', (event) => {
                const target = event.target;
                if (target.tagName === 'BUTTON' || target.tagName === 'A') {
                    console.log('ç”¨æˆ·äº¤äº’:', {
                        element: target.textContent.trim(),
                        type: target.tagName,
                        timestamp: new Date().toISOString()
                    });
                }
            });
        }
        
        // èµ„æºåŠ è½½ç›‘æ§
        function monitorResourceLoading() {
            const resources = performance.getEntriesByType('resource');
            resources.forEach(resource => {
                if (resource.duration > 1000) { // è¶…è¿‡1ç§’çš„èµ„æº
                    console.warn('æ…¢èµ„æºåŠ è½½:', resource.name, resource.duration + 'ms');
                }
            });
        }
        
        // æ ¸å¿ƒWebæŒ‡æ ‡ç›‘æ§
        function monitorCoreWebVitals() {
            // Largest Contentful Paint (LCP)
            new PerformanceObserver((entryList) => {
                const entries = entryList.getEntries();
                const lastEntry = entries[entries.length - 1];
                console.log('LCP:', lastEntry.startTime);
            }).observe({ type: 'largest-contentful-paint', buffered: true });
            
            // First Input Delay (FID)
            new PerformanceObserver((entryList) => {
                const entries = entryList.getEntries();
                entries.forEach(entry => {
                    console.log('FID:', entry.processingStart - entry.startTime);
                });
            }).observe({ type: 'first-input', buffered: true });
            
            // Cumulative Layout Shift (CLS)
            let clsValue = 0;
            new PerformanceObserver((entryList) => {
                entryList.getEntries().forEach(entry => {
                    if (!entry.hadRecentInput) {
                        clsValue += entry.value;
                        console.log('CLSç´¯è®¡:', clsValue);
                    }
                });
            }).observe({ type: 'layout-shift', buffered: true });
        }
        
        // æ€§èƒ½ç›‘æ§
        function initializePerformanceMonitoring() {
            // è®°å½•é¡µé¢åŠ è½½æ—¶é—´
            window.addEventListener('load', () => {
                const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                console.log(`é¡µé¢åŠ è½½å®Œæˆï¼Œè€—æ—¶: ${loadTime}ms`);
            });
            
            // ç›‘æ§å…³é”®èµ„æºåŠ è½½
            const observer = new PerformanceObserver((list) => {
                list.getEntries().forEach((entry) => {
                    if (entry.entryType === 'navigation') {
                        console.log('é¡µé¢å¯¼èˆªæ€§èƒ½:', entry);
                    }
                });
            });
            observer.observe({ entryTypes: ['navigation'] });
        }
        
        // Service Worker æ”¯æŒæ£€æŸ¥
        function checkServiceWorkerSupport() {
            if ('serviceWorker' in navigator) {
                // æ³¨å†ŒService Workerç”¨äºç¦»çº¿ç¼“å­˜
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('Service Worker æ³¨å†ŒæˆåŠŸ:', registration);
                    })
                    .catch(error => {
                        console.log('Service Worker æ³¨å†Œå¤±è´¥:', error);
                    });
            }
        }
        
        // æ˜¾ç¤ºToasté€šçŸ¥
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            const types = {
                success: 'bg-success-500',
                warning: 'bg-warning-500',
                error: 'bg-error-500',
                info: 'bg-primary-500'
            };
            
            toast.className = `fixed top-4 right-4 z-50 text-white px-6 py-3 rounded-lg shadow-lg transform transition-all duration-300 translate-x-full ${types[type]}`;
            toast.textContent = message;
            toast.setAttribute('role', 'alert');
            
            document.body.appendChild(toast);
            
            // åŠ¨ç”»è¿›å…¥
            setTimeout(() => {
                toast.style.transform = 'translateX(0)';
            }, 100);
            
            // è‡ªåŠ¨æ¶ˆå¤±
            setTimeout(() => {
                toast.style.transform = 'translateX(full)';
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }
        
        // é”™è¯¯è¾¹ç•Œå¤„ç†
        window.addEventListener('error', (event) => {
            console.error('å…¨å±€é”™è¯¯:', event.error);
            showToast('ç³»ç»Ÿå‡ºç°å¼‚å¸¸ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•', 'error');
        });
        
        // æœªå¤„ç†çš„Promiseæ‹’ç»
        window.addEventListener('unhandledrejection', (event) => {
            console.error('æœªå¤„ç†çš„Promiseæ‹’ç»:', event.reason);
            showToast('ç³»ç»Ÿå‡ºç°å¼‚å¸¸ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•', 'error');
        });
        
        // å›¾ç‰‡æ‡’åŠ è½½
        function initializeLazyLoading() {
            const images = document.querySelectorAll('img[data-src]');
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.remove('lazy');
                        imageObserver.unobserve(img);
                    }
                });
            });
            
            images.forEach(img => imageObserver.observe(img));
        }
        
        // èŠ‚æµå‡½æ•° - æ€§èƒ½ä¼˜åŒ–
        function throttle(func, delay) {
            let timeoutId;
            let lastExecTime = 0;
            return function (...args) {
                const currentTime = Date.now();
                if (currentTime - lastExecTime > delay) {
                    func.apply(this, args);
                    lastExecTime = currentTime;
                } else {
                    clearTimeout(timeoutId);
                    timeoutId = setTimeout(() => {
                        func.apply(this, args);
                        lastExecTime = Date.now();
                    }, delay - (currentTime - lastExecTime));
                }
            };
        }
        
        // é˜²æŠ–å‡½æ•° - æ€§èƒ½ä¼˜åŒ–
        function debounce(func, delay) {
            let timeoutId;
            return function (...args) {
                clearTimeout(timeoutId);
                timeoutId = setTimeout(() => func.apply(this, args), delay);
            };
        }
        
        // ä¼˜åŒ–åçš„æ»šåŠ¨å¤„ç†
        const throttledScroll = throttle(() => {
            // æ»šåŠ¨æ—¶çš„æ€§èƒ½ä¼˜åŒ–é€»è¾‘
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ è§†å·®æ•ˆæœæˆ–å…¶ä»–æ»šåŠ¨ç›¸å…³ä¼˜åŒ–
        }, 16); // çº¦60fps
        
        window.addEventListener('scroll', throttledScroll, { passive: true });
    </script>

    <!-- ç»“æ„åŒ–æ•°æ® -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "å°é›ªå®AIåŠ©æ‰‹",
        "description": "ä¸“ä¸šçš„ç™½è¡€ç—…AIå…³çˆ±å¹³å°ï¼Œä¸ºç™½è¡€ç—…æ‚£å„¿åŠå®¶å±æä¾›24å°æ—¶AIæ™ºèƒ½é—®ç­”ã€æƒ…ç»ªè¯†åˆ«åˆ†æå’Œå¿ƒç†æ”¯æŒæœåŠ¡",
        "url": "https://xiaoxuebao.ai",
        "applicationCategory": "MedicalApplication",
        "operatingSystem": "Web",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "CNY"
        },
        "author": {
            "@type": "Organization",
            "name": "å°é›ªå®AIåŠ©æ‰‹å›¢é˜Ÿ"
        }
    }
    </script>
