<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>会议仪表盘：白血病Agent项目合作探讨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony (Warm Neutrals with Soft Blue/Teal Accents) -->
    <!-- Application Structure Plan: A single-page interactive dashboard summarizing the meeting. The structure is thematic, not linear, to provide a quick, stakeholder-friendly overview. Sections include Vision, Users, Challenges, Technical Path, and Action Plan. This design prioritizes clarity and immediate takeaways over a chronological recital of the conversation, making it easier to understand the project's key aspects at a glance. -->
    <!-- Visualization & Content Choices: Report Info: Project phases -> Goal: Show change -> Viz: Horizontal Bar Chart -> Interaction: Tooltips for details -> Justification: More engaging than a list for showing progression -> Library: Chart.js/Canvas. Report Info: Action items -> Goal: Organize -> Viz: Kanban-style columns -> Interaction: Clear visual separation -> Justification: Immediately clarifies responsibilities -> Library/Method: HTML/CSS. Report Info: User needs -> Goal: Compare -> Viz: Side-by-side cards -> Interaction: Visual grouping -> Justification: Easy comparison of patient vs. doctor needs -> Library/Method: HTML/CSS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
        }
        .section-title {
            @apply text-2xl font-bold text-gray-800 mb-6 text-center;
        }
        .card {
            @apply bg-white rounded-xl shadow-md overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-1;
        }
        .icon {
            @apply text-3xl;
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #0d9488;
            animation: spin 1s ease infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-stone-50 text-gray-700">

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-10">

        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold text-teal-700">白血病Agent项目合作探讨</h1>
            <p class="text-lg text-gray-500 mt-2">会议仪表盘 | 日期：2025年9月18日</p>
        </header>

        <main class="space-y-16">

            <section id="vision">
                <h2 class="section-title">项目愿景与目标</h2>
                <p class="text-center max-w-3xl mx-auto mb-10 text-gray-600">
                    本部分概述了项目的核心驱动力，从解决当前问题的初步想法，到未来希望实现的宏大蓝图。这不仅是一个工具的开发，更是一次旨在通过技术改善医患体验的探索。
                </p>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="card">
                        <div class="p-8">
                            <div class="flex items-center space-x-4">
                                <div class="text-teal-500 icon">🎯</div>
                                <h3 class="text-xl font-semibold text-gray-800">初期目标：构建坚实基础</h3>
                            </div>
                            <p class="mt-4 text-gray-600">从最基础的知识库问答系统（RAG）入手，结合大语言模型，为白血病患者和医生提供一个可靠、准确的初步信息查询工具，解决信息不对称的问题。</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="p-8">
                             <div class="flex items-center space-x-4">
                                <div class="text-blue-500 icon">🚀</div>
                                <h3 class="text-xl font-semibold text-gray-800">长期愿景：实现精准个性化服务</h3>
                            </div>
                            <p class="mt-4 text-gray-600">最终目标是发展成一个精准的垂直领域模型。通过整合患者的个性化数据（如病历、基因变异），提供定制化的健康管理支持和治疗方案解读，成为医患双方信赖的智能伙伴。</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="users">
                <h2 class="section-title">目标用户与核心需求</h2>
                 <p class="text-center max-w-3xl mx-auto mb-10 text-gray-600">
                    项目的成功关键在于深度理解并满足两类核心用户的独特需求。无论是身处焦虑中的患者家庭，还是面临高强度工作的年轻医生，我们的目标都是为他们提供真正有价值的支持。
                </p>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="card p-8">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <span class="text-blue-500 mr-3 icon">❤️</span> 患者及家属
                        </h3>
                        <ul class="space-y-3 list-inside text-gray-600">
                            <li><strong class="font-medium text-gray-700">可视化解释：</strong>需要将复杂的医疗信息（如治疗方案、文献）转化为通俗易懂的图文内容。</li>
                            <li><strong class="font-medium text-gray-700">全程管理与提醒：</strong>在漫长的化疗和康复期间，需要关于饮食、护理、复查的持续提醒与指导。</li>
                            <li><strong class="font-medium text-gray-700">情绪支持：</strong>通过提供清晰、权威的信息，缓解因未知而产生的焦虑情绪。</li>
                        </ul>
                    </div>
                    <div class="card p-8">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                           <span class="text-teal-500 mr-3 icon">🩺</span> 医生 (尤其住院医)
                        </h3>
                        <ul class="space-y-3 list-inside text-gray-600">
                            <li><strong class="font-medium text-gray-700">高效信息检索：</strong>需要快速、精准地查询最新的临床指南和相关文献，以支持临床决策。</li>
                            <li><strong class="font-medium text-gray-700">辅助医患沟通：</strong>利用工具生成的可视化材料，更有效地向患者解释病情和治疗方案。</li>
                            <li><strong class="font-medium text-gray-700">减轻工作负担：</strong>过滤海量信息，提供聚焦的、高证据等级的资料，减少信息过载。</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <section id="challenges">
                <h2 class="section-title">核心挑战与解决方案</h2>
                 <p class="text-center max-w-3xl mx-auto mb-10 text-gray-600">
                    实现个性化服务的最大障碍是患者数据的获取与隐私保护。我们深入探讨了这一核心难题，并提出了几条兼顾创新与合规的潜在解决路径，以确保项目在安全、合法的轨道上前进。
                </p>
                <div class="bg-white rounded-xl shadow-md p-8">
                    <div class="text-center mb-6">
                        <h3 class="text-xl font-semibold text-red-600">核心挑战：患者数据的隐私与合规</h3>
                        <p class="text-gray-600 mt-2">院内HIS系统的数据因严格的隐私政策而难以直接获取，这是项目个性化功能实现的最大瓶颈。</p>
                    </div>
                    <div class="relative mt-8 flex flex-col md:flex-row justify-center items-center md:items-stretch gap-8">
                        <div class="w-full md:w-1/3 card p-6 text-center border-t-4 border-green-500">
                            <h4 class="font-semibold text-lg text-gray-800">方案一：引导式脱敏收集</h4>
                            <p class="text-sm text-gray-600 mt-2">在应用端通过智能对话或表单，引导用户主动提供关键但非敏感的个人信息，用于模型分析。数据经过脱敏处理，不涉及核心身份隐私。</p>
                        </div>
                         <div class="w-full md:w-1/3 card p-6 text-center border-t-4 border-yellow-500">
                            <h4 class="font-semibold text-lg text-gray-800">方案二：本地化模型部署</h4>
                            <p class="text-sm text-gray-600 mt-2">探索将模型部署在用户本地设备（如App或小程序）上。数据采集和分析完全在本地进行，不上传至云端，从根本上规避数据传输的隐私风险。</p>
                        </div>
                        <div class="w-full md:w-1/3 card p-6 text-center border-t-4 border-blue-500">
                            <h4 class="font-semibold text-lg text-gray-800">方案三：关注政策与科研合作</h4>
                            <p class="text-sm text-gray-600 mt-2">密切关注数据开放政策的未来走向，同时积极探索与医院在科研项目上的合作，在合规框架下获取用于模型训练的脱敏数据集。</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="strategy">
                <h2 class="section-title">技术与策略路径</h2>
                 <p class="text-center max-w-3xl mx-auto mb-10 text-gray-600">
                    为了将愿景变为现实，我们规划了一条清晰的技术实现路径。下图展示了从基础功能到高级个性化服务的演进过程，每一步都旨在为用户创造更多价值。
                </p>
                <div class="card p-8">
                     <div class="chart-container relative h-96 w-full max-w-4xl mx-auto">
                        <canvas id="strategyChart"></canvas>
                    </div>
                </div>
            </section>
            
            <section id="gemini-demo">
                <h2 class="section-title">✨ AI 功能演示</h2>
                <p class="text-center max-w-3xl mx-auto mb-10 text-gray-600">
                    体验未来Leukemia Agent的核心功能。以下模块调用了Gemini AI模型，以模拟它将如何为医生和患者提供智能支持。
                </p>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="card p-8 flex flex-col">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <span class="text-blue-500 mr-3 icon">💬</span> 医患沟通助手
                        </h3>
                        <p class="text-gray-600 mb-4">输入一个专业医疗术语，AI将生成一段通俗易懂的解释，帮助医生更好地与患者沟通。</p>
                        <div class="space-y-4 flex-grow flex flex-col">
                            <input id="medicalTermInput" type="text" placeholder="例如：MRD阳性" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                            <button id="generateExplanationBtn" class="w-full bg-blue-500 text-white font-bold py-2 px-4 rounded-md hover:bg-blue-600 transition-colors flex items-center justify-center space-x-2">
                                <span>✨ 生成通俗解释</span>
                            </button>
                            <div id="explanationResult" class="mt-4 p-4 bg-gray-50 rounded-md border text-gray-600 whitespace-pre-wrap min-h-[120px] flex-grow flex items-center justify-center">
                                <p>AI生成的内容将在此显示...</p>
                            </div>
                        </div>
                    </div>
            
                    <div class="card p-8 flex flex-col">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center">
                            <span class="text-teal-500 mr-3 icon">🤖</span> 模拟问答机器人
                        </h3>
                        <p class="text-gray-600 mb-4">选择一个角色，提出您关心的问题，体验Agent将如何提供针对性的回答。</p>
                         <div class="space-y-4 flex-grow flex flex-col">
                            <select id="personaSelector" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition">
                                <option value="patient">作为 患者家属</option>
                                <option value="doctor">作为 住院医生</option>
                            </select>
                            <textarea id="qaQuestionInput" placeholder="例如：孩子化疗后发烧了怎么办？" rows="2" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition"></textarea>
                            <button id="getAnswerBtn" class="w-full bg-teal-500 text-white font-bold py-2 px-4 rounded-md hover:bg-teal-600 transition-colors flex items-center justify-center space-x-2">
                                <span>✨ 获取AI回答</span>
                            </button>
                            <div id="qaResult" class="mt-4 p-4 bg-gray-50 rounded-md border text-gray-600 whitespace-pre-wrap min-h-[120px] flex-grow flex items-center justify-center">
                                 <p>AI生成的内容将在此显示...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>


            <section id="actions">
                <h2 class="section-title">行动计划与后续步骤</h2>
                <p class="text-center max-w-3xl mx-auto mb-10 text-gray-600">
                    会议明确了双方的责任和下一步行动。清晰的任务分配确保了项目能够高效、协同地向前推进。
                </p>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="bg-white rounded-xl shadow-sm p-6 border-l-4 border-blue-500">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">李帅帅 (项目方)</h3>
                        <ul class="space-y-3 list-disc list-inside text-gray-600">
                            <li><strong>技术原型搭建：</strong>利用Knows提供的API接口及腾讯元器等平台，开始项目原型的技术实践。</li>
                            <li><strong>数据细化整理：</strong>对特定指南（如儿童白血病）进行数据整理，为知识库做准备。</li>
                            <li><strong>内容验证对比：</strong>将自己搭建的系统产出与Knows的API产出进行对比验证。</li>
                             <li><strong>探索院内合作：</strong>整理项目对医生科研的价值，尝试向医院申请获取脱敏病历数据的可能性。</li>
                        </ul>
                    </div>
                    <div class="bg-white rounded-xl shadow-sm p-6 border-l-4 border-teal-500">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Zhitao (Knows)</h3>
                        <ul class="space-y-3 list-disc list-inside text-gray-600">
                            <li><strong>提供API接口：</strong>整理并向李帅帅提供内部通用的医学文献API接口。</li>
                            <li><strong>账号支持：</strong>为李帅帅开通并延长产品账号的使用期限。</li>
                            <li><strong>合规性研究：</strong>就患者数据收集的合规性问题，咨询相关法律或行业专家。</li>
                        </ul>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center mt-16 py-6 border-t">
            <p class="text-sm text-gray-500">&copy; 2025 白血病Agent项目组. All rights reserved.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const ctx = document.getElementById('strategyChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['第一阶段：基础能力构建', '第二阶段：垂直领域深化', '第三阶段：个性化服务'],
                    datasets: [{
                        label: '技术实施优先级',
                        data: [30, 60, 100],
                        backgroundColor: ['rgba(20, 184, 166, 0.6)','rgba(14, 165, 233, 0.6)','rgba(99, 102, 241, 0.6)',],
                        borderColor: ['rgba(20, 184, 166, 1)','rgba(14, 165, 233, 1)','rgba(99, 102, 241, 1)',],
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y', responsive: true, maintainAspectRatio: false,
                    scales: {
                        x: { beginAtZero: true, ticks: { callback: function(value) { return value + '%' }}, title: { display: true, text: '项目完成度'}},
                        y: { ticks: { font: { size: 14 }}}
                    },
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: '项目技术发展路径', font: { size: 18 }, padding: { top: 10, bottom: 30 }},
                        tooltip: {
                             callbacks: {
                                label: function(context) {
                                    let details = '';
                                    if(context.dataIndex === 0) {
                                        details = '任务: 搭建知识库, 实现RAG检索, 提供通用问答。';
                                    } else if (context.dataIndex === 1) {
                                        details = '任务: 框定特定指南, 提高模型准确性, 优化医生端体验。';
                                    } else {
                                        details = '任务: 探索数据整合, 实现基于个人数据的智能推荐与管理。';
                                    }
                                    return `阶段目标: ${details}`;
                                }
                            }
                        }
                    }
                }
            });

            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const generateExplanationBtn = document.getElementById('generateExplanationBtn');
            const medicalTermInput = document.getElementById('medicalTermInput');
            const explanationResult = document.getElementById('explanationResult');

            const getAnswerBtn = document.getElementById('getAnswerBtn');
            const personaSelector = document.getElementById('personaSelector');
            const qaQuestionInput = document.getElementById('qaQuestionInput');
            const qaResult = document.getElementById('qaResult');

            const callGemini = async (systemPrompt, userQuery, resultElement) => {
                resultElement.innerHTML = '<div class="spinner mx-auto"></div>';
                let backoff = 1000;

                for (let i = 0; i < 5; i++) {
                    try {
                        const payload = {
                            contents: [{ parts: [{ text: userQuery }] }],
                            systemInstruction: { parts: [{ text: systemPrompt }] },
                        };

                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const result = await response.json();
                        const candidate = result.candidates?.[0];
                        if (candidate && candidate.content?.parts?.[0]?.text) {
                             resultElement.innerHTML = `<p>${candidate.content.parts[0].text}</p>`;
                             return;
                        } else {
                           throw new Error("Invalid response structure from API.");
                        }
                    } catch (error) {
                        if (i === 4) {
                             resultElement.innerHTML = `<p class="text-red-500">AI模型调用失败，请稍后重试。错误: ${error.message}</p>`;
                        } else {
                             await new Promise(resolve => setTimeout(resolve, backoff));
                             backoff *= 2;
                        }
                    }
                }
            };
            
            generateExplanationBtn.addEventListener('click', () => {
                const term = medicalTermInput.value.trim();
                if (!term) {
                    explanationResult.innerHTML = '<p class="text-red-500">请输入一个医疗术语。</p>';
                    return;
                }
                const systemPrompt = "You are an expert medical communicator specializing in oncology. Your task is to take a technical medical term or phrase related to leukemia and translate it into a simple, empathetic, and easy-to-understand explanation for a patient or their family in Chinese. Avoid overly technical jargon and use analogies if helpful. Keep the explanation concise and clear.";
                callGemini(systemPrompt, term, explanationResult);
            });

            getAnswerBtn.addEventListener('click', () => {
                const question = qaQuestionInput.value.trim();
                if (!question) {
                    qaResult.innerHTML = '<p class="text-red-500">请输入您的问题。</p>';
                    return;
                }
                const persona = personaSelector.value;
                const systemPrompt = "You are a helpful, empathetic medical AI assistant specializing in leukemia, providing a sample response for a project dashboard. Your answer must be in Chinese. Based on the user's selected persona, tailor your response. If the persona is 'patient', explain the concept in simple, non-technical, and reassuring language. If the persona is 'doctor', provide a more technical and detailed answer, referencing clinical guidelines or studies if appropriate, suitable for a medical professional.";
                const userQuery = `Persona: ${persona}\n\nQuestion: ${question}`;
                callGemini(systemPrompt, userQuery, qaResult);
            });
        });
    </script>
</body>
</html>

